# üîí –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏ –¥–ª—è Lazysoft

## –í–∏–∫–æ–Ω–∞–Ω—ñ –∫—Ä–æ–∫–∏

### 1. Content Security Policy (CSP)
‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ `SecurityHeadersMiddleware` –≤ `core/middleware/security_headers.py`
‚úÖ –î–æ–¥–∞–Ω–æ CSP –∑ Trusted Types –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É –≤—ñ–¥ DOM-based XSS
‚úÖ –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –¥–æ–∑–≤–æ–ª–∏ –¥–ª—è Google Analytics, Google Fonts, —Ç–∞ –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –∑–æ–±—Ä–∞–∂–µ–Ω—å

### 2. HTTP Strict Transport Security (HSTS)
‚úÖ –î–æ–¥–∞–Ω–æ HSTS –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∑ `max-age=31536000`, `includeSubDomains` —Ç–∞ `preload`
‚úÖ –ê–∫—Ç–∏–≤—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –≤ production —Ä–µ–∂–∏–º—ñ (–∫–æ–ª–∏ `DEBUG=False`)

### 3. –î–æ–¥–∞—Ç–∫–æ–≤—ñ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–ø–µ–∫–∏
‚úÖ `X-Content-Type-Options: nosniff`
‚úÖ `X-Frame-Options: DENY`
‚úÖ `X-XSS-Protection: 1; mode=block`
‚úÖ `Referrer-Policy: strict-origin-when-cross-origin`
‚úÖ `Permissions-Policy` –¥–ª—è –æ–±–º–µ–∂–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É –¥–æ API
‚úÖ `Cross-Origin-Embedder-Policy: require-corp`
‚úÖ `Cross-Origin-Opener-Policy: same-origin`
‚úÖ `Cross-Origin-Resource-Policy: same-origin`

## –ö–æ–º–∞–Ω–¥–∏ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### 1. –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä —Ä–æ–∑—Ä–æ–±–∫–∏:
```bash
python manage.py runserver
```

### 2. –¢–µ—Å—Ç—É–π—Ç–µ –±–µ–∑–ø–µ–∫–æ–≤—ñ –∑–∞–≥–æ–ª–æ–≤–∫–∏:
```bash
python manage.py test_security_headers
```

### 3. –¢–µ—Å—Ç—É–π—Ç–µ –∑ –≤–ª–∞—Å–Ω–∏–º URL:
```bash
python manage.py test_security_headers --url https://yourdomain.com
```

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Developer Tools (F12)
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ –≤–∫–ª–∞–¥–∫—É Network
3. –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Å—Ç–æ—Ä—ñ–Ω–∫—É
4. –ö–ª—ñ–∫–Ω—ñ—Ç—å –Ω–∞ –ø–µ—Ä—à–∏–π –∑–∞–ø–∏—Ç (–∑–∞–∑–≤–∏—á–∞–π HTML –¥–æ–∫—É–º–µ–Ω—Ç)
5. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤–∫–ª–∞–¥–∫—É Headers –Ω–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –±–µ–∑–ø–µ–∫–æ–≤–∏—Ö –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è production

### 1. –û–Ω–æ–≤—ñ—Ç—å –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤ `.env`:
```env
DEBUG=False
SECURE_SSL_REDIRECT=True
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=True
SECURE_HSTS_PRELOAD=True
```

### 2. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ HTTPS –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ
- –û—Ç—Ä–∏–º–∞–π—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç (Let's Encrypt, Cloudflare, —Ç–æ—â–æ)
- –ù–∞–ª–∞—à—Ç—É–π—Ç–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç –∑ HTTP –Ω–∞ HTTPS
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –≤—Å—ñ —Ä–µ—Å—É—Ä—Å–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è —á–µ—Ä–µ–∑ HTTPS

### 3. –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó
- –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–Ω–æ–≤–ª—é–π—Ç–µ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Å–∏–ª—å–Ω—ñ –ø–∞—Ä–æ–ª—ñ
- –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–ø–µ–∫–∏
- –†–µ–≥—É–ª—è—Ä–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø—ñ–¥–æ–∑—Ä—ñ–ª—É –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

```
core/
‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ security.py (—ñ—Å–Ω—É—é—á–∏–π)
‚îÇ   ‚îî‚îÄ‚îÄ security_headers.py (–Ω–æ–≤–∏–π)
‚îî‚îÄ‚îÄ management/
    ‚îî‚îÄ‚îÄ commands/
        ‚îî‚îÄ‚îÄ test_security_headers.py (–Ω–æ–≤–∏–π)
```

## –ü—Ä–∏–º—ñ—Ç–∫–∏

- CSP –º–æ–∂–µ –ø–æ—Ç—Ä–µ–±—É–≤–∞—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—ñ—Å–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö —Å–∫—Ä–∏–ø—Ç—ñ–≤
- Trusted Types –≤–∏–º–∞–≥–∞—î –¥–æ–¥–∞—Ç–∫–æ–≤–æ–≥–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö JavaScript –¥–æ–¥–∞—Ç–∫—ñ–≤
- HSTS –ø—Ä–∞—Ü—é—î —Ç—ñ–ª—å–∫–∏ —á–µ—Ä–µ–∑ HTTPS
- –î–µ—è–∫—ñ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –º–æ–∂—É—Ç—å –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—É–≤–∞—Ç–∏ –∑ CDN (Cloudflare, —Ç–æ—â–æ)

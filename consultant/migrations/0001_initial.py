# Generated by Django 4.2.7 on 2025-09-08 06:45

from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion
import uuid


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='ChatSession',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('session_id', models.CharField(max_length=100, unique=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_active', models.BooleanField(default=True)),
                ('user_ip', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.TextField(blank=True, null=True)),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': '–°–µ—Å—ñ—è —á–∞—Ç—É',
                'verbose_name_plural': '–°–µ—Å—ñ—ó —á–∞—Ç—É',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ConsultantProfile',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(default='RAG –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç', max_length=100)),
                ('description', models.TextField(default='–®—Ç—É—á–Ω–∏–π —ñ–Ω—Ç–µ–ª–µ–∫—Ç –¥–ª—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ–π —Ç–∞ –¥–æ–ø–æ–º–æ–≥–∏')),
                ('avatar', models.CharField(default='ü´ß', max_length=10)),
                ('is_active', models.BooleanField(default=True)),
                ('max_tokens', models.IntegerField(default=4000)),
                ('temperature', models.FloatField(default=0.7)),
                ('system_prompt', models.TextField(default='–¢–∏ RAG –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç - —à—Ç—É—á–Ω–∏–π —ñ–Ω—Ç–µ–ª–µ–∫—Ç, —è–∫–∏–π –¥–æ–ø–æ–º–∞–≥–∞—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –∑ —Ä—ñ–∑–Ω–∏–º–∏ –ø–∏—Ç–∞–Ω–Ω—è–º–∏. –í—ñ–¥–ø–æ–≤—ñ–¥–∞–π –∫–æ—Ä–∏—Å–Ω–∏–º–∏, —Ç–æ—á–Ω–∏–º–∏ —Ç–∞ –¥—Ä—É–∂–µ–ª—é–±–Ω–∏–º–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—è–º–∏ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é –º–æ–≤–æ—é.')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': '–ü—Ä–æ—Ñ—ñ–ª—å –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞',
                'verbose_name_plural': '–ü—Ä–æ—Ñ—ñ–ª—ñ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞',
            },
        ),
        migrations.CreateModel(
            name='KnowledgeBase',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200)),
                ('content', models.TextField()),
                ('category', models.CharField(blank=True, max_length=100, null=True)),
                ('tags', models.CharField(blank=True, help_text='–¢–µ–≥–∏ —á–µ—Ä–µ–∑ –∫–æ–º—É', max_length=500, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('priority', models.IntegerField(default=0, help_text='–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç (–≤–∏—â–∏–π = –≤–∞–∂–ª–∏–≤—ñ—à–∏–π)')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': '–ë–∞–∑–∞ –∑–Ω–∞–Ω—å',
                'verbose_name_plural': '–ë–∞–∑–∞ –∑–Ω–∞–Ω—å',
                'ordering': ['-priority', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Message',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('role', models.CharField(choices=[('user', '–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á'), ('assistant', '–ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç'), ('system', '–°–∏—Å—Ç–µ–º–∞')], max_length=20)),
                ('content', models.TextField()),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('is_processed', models.BooleanField(default=False)),
                ('processing_time', models.FloatField(blank=True, null=True)),
                ('tokens_used', models.IntegerField(blank=True, null=True)),
                ('chat_session', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='messages', to='consultant.chatsession')),
            ],
            options={
                'verbose_name': '–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è',
                'verbose_name_plural': '–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è',
                'ordering': ['created_at'],
            },
        ),
        migrations.CreateModel(
            name='ChatAnalytics',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('total_messages', models.IntegerField(default=0)),
                ('user_messages', models.IntegerField(default=0)),
                ('assistant_messages', models.IntegerField(default=0)),
                ('total_tokens_used', models.IntegerField(default=0)),
                ('session_duration', models.FloatField(blank=True, null=True)),
                ('satisfaction_rating', models.IntegerField(blank=True, choices=[(1, '–î—É–∂–µ –ø–æ–≥–∞–Ω–æ'), (2, '–ü–æ–≥–∞–Ω–æ'), (3, '–ù–æ—Ä–º–∞–ª—å–Ω–æ'), (4, '–î–æ–±—Ä–µ'), (5, '–í—ñ–¥–º—ñ–Ω–Ω–æ')], null=True)),
                ('feedback', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('chat_session', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='analytics', to='consultant.chatsession')),
            ],
            options={
                'verbose_name': '–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ —á–∞—Ç—É',
                'verbose_name_plural': '–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ —á–∞—Ç—ñ–≤',
            },
        ),
    ]

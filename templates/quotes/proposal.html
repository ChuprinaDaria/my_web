{% load i18n %}
<!doctype html>
<html lang="{{ LANGUAGE_CODE|default:'uk' }}">
<head>
<meta charset="utf-8">
<title>{% trans "Commercial Proposal" %} | {{ brand.company_name }}</title>
<style>
  body { 
    font-family: Arial, sans-serif; 
    font-size: 11px; 
    line-height: 1.4;
    margin: 20px;
    background: #fff;
    color: #000;
  }
  .header { display: flex; align-items: center; margin-bottom: 20px; border-bottom: 2px solid #9eff00; padding-bottom: 15px; }
  .logo { width: 80px; height: auto; margin-right: 15px; }
  .company-info h1 { margin: 0; font-size: 18px; color: #000; font-weight: bold; }
  .company-info .subtitle { margin: 3px 0 0 0; color: #666; font-size: 10px; }
  .document-info { text-align: right; margin-bottom: 20px; font-size: 10px; color: #666; }
  .parties { display: flex; justify-content: space-between; margin-bottom: 25px; }
  .party { width: 45%; }
  .party h2 { font-size: 14px; margin: 0 0 8px 0; color: #000; border-bottom: 1px solid #ddd; padding-bottom: 3px; }
  table { width: 100%; border-collapse: collapse; margin: 15px 0; font-size: 10px; }
  th, td { border: 1px solid #ccc; padding: 8px 6px; text-align: left; vertical-align: top; }
  th { background: #f8f8f8; font-weight: bold; font-size: 9px; text-transform: uppercase; }
  .bilingual { font-size: 9px; color: #666; font-style: italic; }
  .total-row { background: #f0f0f0; font-weight: bold; }
  .footer { margin-top: 30px; padding-top: 15px; border-top: 1px solid #ddd; font-size: 9px; color: #666; }
  .signature-section { margin-top: 25px; text-align: right; font-size: 10px; }
</style>
</head>
<body>

<div class="header">
  {% if brand_logo_url %}
    <img src="{{ brand_logo_url }}" alt="{{ brand.company_name }} Logo" class="logo">
  {% elif brand.logo %}
    <img src="{{ brand.logo.url }}" alt="{{ brand.company_name }} Logo" class="logo">
  {% endif %}
  <div class="company-info">
    <h1>{{ brand.company_name }}</h1>
    <div class="subtitle">
      {% trans "Commercial Proposal" %} / {% trans "Комерційна пропозиція" %} / {% trans "Propozycja komercyjna" %}
    </div>
  </div>
</div>

<div class="document-info">
  {% trans "Issued" %} / {% trans "Видано" %} / {% trans "Wystawiono" %}: {{ issued_at|date:"Y-m-d H:i" }}, {{ brand.city|default:"Wrocław" }}
</div>

<div class="parties">
  <div class="party">
    <h2>
      {% trans "Service Provider" %}<br>
      <span class="bilingual">{% trans "Надавач послуг" %} / {% trans "Usługodawca" %}</span>
    </h2>
    <div><strong>{{ brand.company_name }}</strong></div>
    <div>{{ brand.address_line1 }}</div>
    <div>{{ brand.postal_code }} {{ brand.city }}</div>
    <div>{{ brand.country|default:"Poland" }}</div>
    {% if brand.tax_id %}<div>NIP: {{ brand.tax_id }}</div>{% endif %}
    <div>{{ brand.website }}</div>
    {% if brand.phone %}<div>Tel: {{ brand.phone }}</div>{% endif %}
    <div>{{ brand.email }}</div>
  </div>
  
  <div class="party">
    <h2>
      {% trans "Client" %}<br>
      <span class="bilingual">{% trans "Клієнт" %} / {% trans "Klient" %}</span>
    </h2>
    <div><strong>{{ name }}</strong></div>
    <div>{{ email }}</div>
    {% if company %}<div>{% trans "Company" %} / {% trans "Компанія" %}: {{ company }}</div>{% endif %}
    {% if notes %}
    <div style="margin-top:8px;">
      <strong>{% trans "Notes" %} / {% trans "Примітки" %}:</strong><br>
      {{ notes|linebreaksbr }}
    </div>
    {% endif %}
  </div>
</div>

<h2 style="font-size: 14px; margin: 20px 0 10px 0;">
  {% trans "SERVICES ESTIMATION" %}<br>
  <span class="bilingual">{% trans "ОЦІНКА ПОСЛУГ" %} / {% trans "WYCENA USŁUG" %}</span>
</h2>

<table>
  <thead>
    <tr>
      <th style="width: 5%;">№ / №<br><span class="bilingual">Lp</span></th>
      <th style="width: 40%;">{% trans "Service" %}<br><span class="bilingual">{% trans "Послуга" %} / {% trans "Usługa" %}</span></th>
      <th style="width: 20%;">{% trans "Package" %}<br><span class="bilingual">{% trans "Пакет" %} / {% trans "Pakiet" %}</span></th>
      <th style="width: 15%;">{% trans "Price" %}<br><span class="bilingual">{% trans "Ціна" %} / {% trans "Cena" %}</span></th>
      <th style="width: 20%;">{% trans "Notes" %}<br><span class="bilingual">{% trans "Примітки" %} / {% trans "Uwagi" %}</span></th>
    </tr>
  </thead>
  <tbody>
    {% for item in items %}
    <tr>
      <td>{{ forloop.counter }}</td>
      <td><strong>{{ item.title }}</strong></td>
      <td>{{ item.pkg }}</td>
      <td><strong>{{ item.price }} {{ item.currency }}</strong></td>
      <td>{{ item.assumptions|default:"-" }}</td>
    </tr>
    {% endfor %}
    
    <tr class="total-row">
      <td colspan="3" style="text-align: right;"><strong>{% trans "TOTAL" %} / {% trans "РАЗОМ" %} / {% trans "RAZEM" %}:</strong></td>
      <td colspan="2"><strong>{% for item in items %}{{ item.price }}{% if not forloop.last %} + {% endif %}{% endfor %} {{ items.0.currency|default:"USD" }}</strong></td>
    </tr>
  </tbody>
</table>

<div class="signature-section">
  <div style="margin-bottom: 15px;">
    {% trans "Authorized person" %} / {% trans "Уповноважена особа" %} / {% trans "Osoba upoważniona" %}:
  </div>
  <div style="border-bottom: 1px solid #000; width: 200px; margin-left: auto; margin-bottom: 5px;"></div>
  <div><strong>{{ brand.authorized_person|default:"Daria Chuprina" }}</strong></div>
</div>

<div class="footer">
  <div style="margin-bottom: 8px;">
    {% trans "The cost is estimated and may be adjusted after a short free consultation." %}<br>
    <span class="bilingual">
      {% trans "Вартість орієнтовна та може коригуватись після короткої безкоштовної консультації." %}<br>
      {% trans "Koszt jest orientacyjny i może być korygowany po krótkiej bezpłatnej konsultacji." %}
    </span>
  </div>
  <div>
    {% trans "We comply with GDPR; your data is used exclusively for preparing this proposal." %}<br>
    <span class="bilingual">
      {% trans "Ми дотримуємось GDPR; ваші дані використовуються виключно для підготовки цієї пропозиції." %}<br>
      {% trans "Przestrzegamy RODO; Twoje dane są wykorzystywane wyłącznie do przygotowania tej propozycji." %}
    </span>
  </div>
</div>

</body>
</html>

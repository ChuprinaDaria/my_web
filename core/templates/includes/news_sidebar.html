{% load i18n %}
<aside class="news-sidebar">

  <div class="sidebar-section glass card">
    <h3>
      <i data-lucide="search"></i>
      {% trans "Search" %}
    </h3>
    <form method="GET" class="search-form">
      <div class="search-input-group">
        <input type="search" name="search" value="{{ request.GET.search }}" placeholder="{% trans 'Search tech news...' %}" class="search-input">
        <button type="submit" class="search-button">
          <i data-lucide="search"></i>
        </button>
      </div>
    </form>
  </div>

  {% if related_services %}
    <div class="sidebar-section glass card">
      <h3>
        <i data-lucide="grid-3x3"></i>
        {% trans "Related services" %}
      </h3>
      <div class="related-services-list">
        {% for service in related_services %}
          <a href="{{ service.url }}" class="service-item">
            <div class="service-icon">
              {% if service.icon %}
                <img src="{{ service.icon.url|default:service.icon }}" alt="{{ service.title|default:service.slug }}" loading="lazy">
              {% else %}
                <span>âš¡</span>
              {% endif %}
            </div>
            <div class="service-info">
              <span class="service-name">{{ service.title|default:service.slug }}</span>
              <small class="service-description">{{ service.short|default:''|truncatewords:8 }}</small>
            </div>
          </a>
        {% endfor %}
      </div>
    </div>
  {% endif %}

  <div class="sidebar-section glass card">
    <h3>
      <i data-lucide="folder"></i>
      {% trans "Categories" %}
    </h3>
    <div class="categories-list">
      <a href="/{% if CURRENT_LANG != 'en' %}{{ CURRENT_LANG }}/{% endif %}news/" class="category-item {% if not current_category %}active{% endif %}">
        <i data-lucide="newspaper"></i>
        {% trans "All news" %}
        <small>({{ total_articles }})</small>
      </a>
      
      {% for category in categories %}
        <a href="/{% if CURRENT_LANG != 'en' %}{{ CURRENT_LANG }}/{% endif %}news/category/{{ category.slug }}/" class="category-item {% if current_category and current_category.slug == category.slug %}active{% endif %}">
          <i data-lucide="tag"></i>
          {{ category.get_name }}
          <small>({{ category.articles_count }})</small>
        </a>
      {% endfor %}
    </div>
  </div>

  {% if other_news %}
    <div class="sidebar-section glass card">
      <h3>
        <i data-lucide="clock"></i>
        {% trans "Other news" %}
      </h3>
      <div class="other-news-list">
        {% for article in other_news|slice:":5" %}
          <a href="{{ article.get_absolute_url }}" class="other-news-item">
            <div>
              {{ article.get_title|truncatewords:8 }}
            </div>
            <div class="news-meta">
              <span class="news-category">{{ article.category.icon }}</span>
              <time class="news-date">{{ article.published_at|date:"d.m" }}</time>
            </div>
          </a>
        {% endfor %}
      </div>
    </div>
  {% endif %}

  

  

</aside>
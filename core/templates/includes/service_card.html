{% load i18n %}
{% get_current_language as CURRENT_LANG %}

<!-- 🎯 ГОРИЗОНТАЛЬНА КАРТКА СЕРВІСУ (як about-card) -->
<div class="service-card clickable" 
     data-href="/{{ CURRENT_LANG }}/services/{{ service.slug }}/"
     onclick="location.href='/{{ CURRENT_LANG }}/services/{{ service.slug }}/'">

 <!-- 🖼️ IMAGE SECTION -->
<div class="service-image">
 {% if service.icon %}
   <img src="{{ service.icon.url|default:service.icon }}" 
        alt="{{ service.title|default:service.title_en }}" 
        class="service-img"
        loading="lazy">
 {% else %}
   <div class="service-placeholder">
     <i class="fas fa-cogs"></i>
   </div>
 {% endif %}
</div>

  <!-- 📝 TEXT CONTENT -->
  <div class="service-text">
    
    <!-- 🏷️ TAGS -->
    {% if service.tags.all or service.tags_list %}
      <div class="service-tags">
        {% for tag in service.tags.all|slice:":2" %}
          <span class="service-tag">
            {% if tag.emoji %}{{ tag.emoji }} {% endif %}{{ tag.name }}
          </span>
        {% empty %}
          {% if service.tags_list %}
            {% for tag in service.tags_list|slice:":2" %}
              <span class="service-tag">
                {% if tag.emoji %}{{ tag.emoji }} {% endif %}{{ tag.name }}
              </span>
            {% endfor %}
          {% endif %}
        {% endfor %}
      </div>
    {% endif %}

    <!-- 📄 TITLE -->
    <h3>
      {% if service.title %}{{ service.title|safe }}
      {% elif CURRENT_LANG == 'uk' and service.title_uk %}{{ service.title_uk|safe }}
      {% elif CURRENT_LANG == 'pl' and service.title_pl %}{{ service.title_pl|safe }}
      {% else %}{{ service.title_en|safe }}{% endif %}
    </h3>

    <!-- 💭 DESCRIPTION -->
    <p>
      {% with sd=service.short_description %}
        {% if sd %}{{ sd|safe|truncatewords:25 }}
        {% elif CURRENT_LANG == 'uk' and service.short_description_uk %}{{ service.short_description_uk|safe|truncatewords:25 }}
        {% elif CURRENT_LANG == 'pl' and service.short_description_pl %}{{ service.short_description_pl|safe|truncatewords:25 }}
        {% else %}{{ service.short_description_en|safe|truncatewords:25 }}{% endif %}
      {% endwith %}
    </p>

    <!-- 📊 METRICS -->
    {% if service.related_articles_count or service.related_projects_count %}
      <div class="service-metrics">
        {% if service.related_projects_count %}
          <span class="metric">🚀 {{ service.related_projects_count }} projects</span>
        {% endif %}
        {% if service.related_articles_count %}
          <span class="metric">📰 {{ service.related_articles_count }} articles</span>
        {% endif %}
      </div>
    {% endif %}

  </div>
</div>
{% load i18n %}
{% get_current_language as CURRENT_LANG %}

<div class="service-card clickable" 
     data-href="{% url 'service_detail' service.slug %}">

  <div class="service-image">
    {% if service.icon %}
      <img src="{{ service.icon.url }}"
           alt="{{ service.title }}" 
           class="service-img"
           loading="lazy">
    {% else %}
      <div class="service-placeholder">
        <i data-lucide="cogs"></i>
      </div>
    {% endif %}
  </div>

  <div class="service-text">
    
    <!-- Service Tags -->
    {% if service.tags %}
      <div class="service-tags">
        {% for tag in service.tags %}
          {% if forloop.counter <= 3 %}
            <span class="service-tag">
              {% if tag.name %}{{ tag.name }}{% else %}{{ tag }}{% endif %}
            </span>
          {% endif %}
        {% endfor %}
      </div>
    {% endif %}

    <h3>{{ service.title|safe }}</h3>

    <p>{{ service.short|safe|truncatewords:20 }}</p>

    <!-- Service Metrics -->
    <div class="service-metrics">
      {% if service.is_featured %}
        <span class="metric featured">‚≠ê {% trans "Featured" %}</span>
      {% endif %}
      {% if service.priority_emoji %}
        <span class="metric priority">{{ service.priority_emoji }} {% trans "Priority" %}</span>
      {% endif %}
      {% if service.projects_count %}
        <span class="metric projects">üöÄ {{ service.projects_count }} {% trans "projects" %}</span>
      {% endif %}
    </div>

    <div class="service-cta">
      <button class="cta-button" 
              data-service-title="{{ service.title|escapejs }}"
              onclick="event.stopPropagation(); scrollToContact(this.dataset.serviceTitle);">
        <span class="cta-icon">üí¨</span>
        <span class="cta-text">
          {% if CURRENT_LANG == 'uk' %}–ó–∞–º–æ–≤–∏—Ç–∏ –ø–æ—Å–ª—É–≥—É
          {% elif CURRENT_LANG == 'pl' %}Zam√≥w us≈Çugƒô
          {% else %}Get This Service{% endif %}
        </span>
        <span class="cta-arrow">‚Üí</span>
      </button>
    </div>

  </div>
</div>
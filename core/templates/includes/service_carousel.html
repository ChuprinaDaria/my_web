{% load i18n %}
{% get_current_language as CURRENT_LANG %}

<section class="services-carousel-section" aria-labelledby="services-title">
  
  <div class="services-carousel-header">
    <h2 id="services-title">{{ title|default:"Our Services" }}</h2>
    {% if subtitle %}
      <p class="services-subtitle">{{ subtitle }}</p>
    {% endif %}
  </div>

  <div class="services-carousel" role="region" aria-label="{{ title|default:'Services carousel' }}">
    
    <div class="carousel-nav desktop-nav">
      <button class="nav-btn nav-prev" 
              type="button" 
              aria-label="{% trans 'Previous services' %}"
              disabled>
        <i data-lucide="chevron-left"></i>
      </button>
      <button class="nav-btn nav-next" 
              type="button" 
              aria-label="{% trans 'Next services' %}">
        <i data-lucide="chevron-right"></i>
      </button>
    </div>

    <div class="carousel-track" 
         role="group" 
         aria-live="polite"
         tabindex="0"
         aria-label="{% trans 'Use arrow keys or swipe to navigate services' %}">
      
      {% for service in services %}
        <div class="carousel-slide" role="group" aria-label="{% trans 'Service' %} {{ forloop.counter }}">
          {% include 'includes/service_card.html' with service=service %}
        </div>
      {% empty %}
        <div class="carousel-empty">
          <div class="empty-content">
            <i data-lucide="settings" aria-hidden="true"></i>
            <h3>{% trans "No services available" %}</h3>
            <p>{% trans "Check back later for new services" %}</p>
          </div>
        </div>
      {% endfor %}
    </div>

    <div class="carousel-nav mobile-nav">
      <button class="nav-btn nav-prev" 
              type="button" 
              aria-label="{% trans 'Previous services' %}"
              disabled>
        <i data-lucide="chevron-left"></i>
      </button>
      <button class="nav-btn nav-next" 
              type="button" 
              aria-label="{% trans 'Next services' %}">
        <i data-lucide="chevron-right"></i>
      </button>
    </div>

  </div>

  <div class="services-footer">
    <a href="{% url 'contacts:contact_page' %}" 
       class="btn-primary">
      <i data-lucide="rocket" aria-hidden="true"></i>
      <span>{% trans "Get Started" %}</span>
    </a>
    
    {% if show_view_all %}
    <a href="{% url 'services_list' %}" 
       class="btn-secondary">
      <i data-lucide="grid-3x3" aria-hidden="true"></i>
      <span>{% trans "View All Services" %}</span>
    </a>
    {% endif %}
  </div>
</section>
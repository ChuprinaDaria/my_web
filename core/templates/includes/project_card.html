{% load static i18n %}
{% get_current_language as CURRENT_LANG %}

<div class="project-card clickable" 
     data-complexity="{{ project.complexity_level }}" 
     data-priority="{{ project.priority }}" 
     data-href="/{% if CURRENT_LANG != 'en' %}{{ CURRENT_LANG }}/{% endif %}projects/{{ project.slug }}/"
     onclick="window.location.href='/{% if CURRENT_LANG != 'en' %}{{ CURRENT_LANG }}/{% endif %}projects/{{ project.slug }}/';"
     style="cursor: pointer;">
  


    

  {% if project.featured_image %}
    <div class="project-image">
      <img src="{{ project.featured_image.url }}" 
           alt="{% if CURRENT_LANG == 'uk' and project.title_uk %}{{ project.title_uk }}{% elif CURRENT_LANG == 'pl' and project.title_pl %}{{ project.title_pl }}{% else %}{{ project.title_en }}{% endif %}" 
           loading="lazy">
      <div class="image-overlay"></div>
    </div>
  {% endif %}

  <div class="project-content">
    <h3>
      {% if CURRENT_LANG == 'uk' and project.title_uk %}{{ project.title_uk|safe }}
      {% elif CURRENT_LANG == 'pl' and project.title_pl %}{{ project.title_pl|safe }}
      {% else %}{{ project.title_en|safe }}{% endif %}
    </h3>
    
    <div class="client-request">
      <span class="request-label">{% trans "Client request:" %}</span>
      <div class="request-text">
        {% if CURRENT_LANG == 'uk' and project.client_request_uk %}{{ project.client_request_uk|safe|truncatewords:15 }}
        {% elif CURRENT_LANG == 'pl' and project.client_request_pl %}{{ project.client_request_pl|safe|truncatewords:15 }}
        {% else %}{{ project.client_request_en|safe|truncatewords:15 }}{% endif %}
      </div>
    </div>
    
    <div class="project-result">
      <span class="result-label">{% trans "What we did:" %}</span>
      <div class="result-text">
        {% if CURRENT_LANG == 'uk' and project.short_description_uk %}{{ project.short_description_uk|safe|truncatewords:12 }}
        {% elif CURRENT_LANG == 'pl' and project.short_description_pl %}{{ project.short_description_pl|safe|truncatewords:12 }}
        {% else %}{{ project.short_description_en|safe|truncatewords:12 }}{% endif %}
      </div>
    </div>
    
    <div class="project-metrics">
      {% if project.client_time_saved_hours %}
        <span class="metric-item">
          ‚è±Ô∏è {% trans "Saves" %} {{ project.client_time_saved_hours }} {% trans "hours/week" %}
        </span>
      {% endif %}
      
      {% if project.development_duration_weeks %}
        <span class="metric-item">
          {{ project.development_duration_weeks }} {% trans "weeks" %}
        </span>
      {% endif %}
    </div>
    
    <div class="project-cta">
      <button class="cta-button" 
              data-project-title="{% if CURRENT_LANG == 'uk' and project.title_uk %}{{ project.title_uk|escapejs }}{% elif CURRENT_LANG == 'pl' and project.title_pl %}{{ project.title_pl|escapejs }}{% else %}{{ project.title_en|escapejs }}{% endif %}"
              onclick="event.stopPropagation(); window.ctaModal && window.ctaModal.show('project_card', '–ü—Ä–æ—î–∫—Ç: ' + this.dataset.projectTitle);">
        <span class="cta-icon">üí¨</span>
        <span class="cta-text">
          {% if CURRENT_LANG == 'uk' %}–ó–∞–º–æ–≤–∏—Ç–∏ —Å–æ–±—ñ —Ç–∞–∫–∏–π
          {% elif CURRENT_LANG == 'pl' %}Zam√≥w sobie
          {% else %}Get Your Own Bot{% endif %}
        </span>
        <span class="cta-arrow">‚Üí</span>
      </button>
      
      <div class="secondary-actions">
        <button class="details-link">
          {% if CURRENT_LANG == 'uk' %}–î–µ—Ç–∞–ª—å–Ω–∏–π –∫–µ–π—Å
          {% elif CURRENT_LANG == 'pl' %}Czytaj wiƒôcej
          {% else %}Full Case{% endif %}
        </button>
        
        {% if project.project_url %}
          <button class="demo-link" onclick="event.stopPropagation(); window.open('{{ project.project_url }}', '_blank');">
            {% if CURRENT_LANG == 'uk' %}–î–µ–º–æ
            {% elif CURRENT_LANG == 'pl' %}Demo
            {% else %}Live Demo{% endif %}
          </button>
        {% endif %}
      </div>
    </div>
  </div>
  
  <div class="card-glow-effect"></div>
</div>
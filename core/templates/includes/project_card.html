{% load static i18n %}
{% get_current_language as CURRENT_LANG %}

<div class="project-card" 
     data-complexity="{{ project.complexity_level }}" 
     data-priority="{{ project.priority }}" 
     onclick="location.href='/{{ CURRENT_LANG }}/projects/{{ project.slug }}/'">
  
  <!-- Project Tags -->
  <div class="project-tags">
    <!-- Main project type -->
    {% if project.project_type_uk or project.project_type_en or project.project_type_pl %}
      <span class="project-tag primary" data-complexity="{{ project.complexity_level }}">
        <span class="tag-icon">üè¢</span>
        {% if CURRENT_LANG == 'uk' and project.project_type_uk %}{{ project.project_type_uk }}
        {% elif CURRENT_LANG == 'pl' and project.project_type_pl %}{{ project.project_type_pl }}
        {% else %}{{ project.project_type_en }}{% endif %}
      </span>
    {% endif %}

    <!-- Special badges -->
    {% if project.is_top_project %}
      <span class="project-tag highlight top-badge">
        <span class="tag-icon">üëë</span>{% trans "TOP" %}
      </span>
    {% endif %}
    
    {% if project.is_innovative %}
      <span class="project-tag innovation">
        <span class="tag-icon">‚ö°</span>{% trans "INNOVATIVE" %}
      </span>
    {% endif %}
    
    {% if project.is_ai_powered %}
      <span class="project-tag ai-powered">
        <span class="tag-icon">ü§ñ</span>{% trans "AI POWERED" %}
      </span>
    {% endif %}
    
    {% if project.is_enterprise %}
      <span class="project-tag enterprise">
        <span class="tag-icon">üè≠</span>{% trans "ENTERPRISE" %}
      </span>
    {% endif %}
    
    {% if project.is_complex %}
      <span class="project-tag complex">
        <span class="tag-icon">üß©</span>{% trans "COMPLEX" %}
      </span>
    {% endif %}

    <!-- Custom badge -->
    {% if project.custom_badge_uk or project.custom_badge_en or project.custom_badge_pl %}
      <span class="project-tag custom" data-color="{{ project.custom_badge_color|default:'green' }}">
        <span class="tag-icon">‚ú®</span>
        {% if CURRENT_LANG == 'uk' and project.custom_badge_uk %}{{ project.custom_badge_uk }}
        {% elif CURRENT_LANG == 'pl' and project.custom_badge_pl %}{{ project.custom_badge_pl }}
        {% else %}{{ project.custom_badge_en }}{% endif %}
      </span>
    {% endif %}
  </div>

  <!-- Project Image -->
  {% if project.featured_image %}
    <div class="project-image">
      <img src="{{ project.featured_image.url }}" 
           alt="{% if CURRENT_LANG == 'uk' and project.title_uk %}{{ project.title_uk }}{% elif CURRENT_LANG == 'pl' and project.title_pl %}{{ project.title_pl }}{% else %}{{ project.title_en }}{% endif %}" 
           loading="lazy">
      <div class="image-overlay"></div>
    </div>
  {% endif %}

  <!-- Main Content -->
  <div class="project-content">
    <h3 class="project-title">
      {% if CURRENT_LANG == 'uk' and project.title_uk %}{{ project.title_uk|safe }}
      {% elif CURRENT_LANG == 'pl' and project.title_pl %}{{ project.title_pl|safe }}
      {% else %}{{ project.title_en|safe }}{% endif %}
    </h3>
    
    <!-- Client Request -->
    <div class="client-request">
      <span class="request-label">{% trans "Client request:" %}</span>
      <div class="request-text">
        {% if CURRENT_LANG == 'uk' and project.client_request_uk %}{{ project.client_request_uk|safe|truncatewords:15 }}
        {% elif CURRENT_LANG == 'pl' and project.client_request_pl %}{{ project.client_request_pl|safe|truncatewords:15 }}
        {% else %}{{ project.client_request_en|safe|truncatewords:15 }}{% endif %}
      </div>
    </div>
    
    <!-- Project Result -->
    <div class="project-result">
      <span class="result-label">{% trans "What we did:" %}</span>
      <div class="result-text">
        {% if CURRENT_LANG == 'uk' and project.short_description_uk %}{{ project.short_description_uk|safe|truncatewords:12 }}
        {% elif CURRENT_LANG == 'pl' and project.short_description_pl %}{{ project.short_description_pl|safe|truncatewords:12 }}
        {% else %}{{ project.short_description_en|safe|truncatewords:12 }}{% endif %}
      </div>
    </div>
    
    <!-- Metrics -->
    <div class="project-metrics">
      {% if project.client_time_saved_hours %}
        <span class="metric-item">
          {% if CURRENT_LANG == 'uk' %}‚è±Ô∏è {% trans "Saves" %} {{ project.client_time_saved_hours }} {% trans "hours/week" %}
          {% elif CURRENT_LANG == 'pl' %}‚è±Ô∏è Oszczƒôdza {{ project.client_time_saved_hours }} h/tydzie≈Ñ
          {% else %}‚è±Ô∏è Saves {{ project.client_time_saved_hours }}h/week{% endif %}
        </span>
      {% endif %}
      
      {% if project.budget_range %}
        <span class="metric-item">{{ project.get_budget_range_display }}</span>
      {% endif %}
      
      {% if project.development_duration_weeks %}
        <span class="metric-item">
          {% if CURRENT_LANG == 'uk' %}{{ project.development_duration_weeks }} {% trans "weeks" %}
          {% elif CURRENT_LANG == 'pl' %}{{ project.development_duration_weeks }} tygodni
          {% else %}{{ project.development_duration_weeks }} weeks{% endif %}
        </span>
      {% endif %}
    </div>
    
    <!-- CTA Section -->
    <div class="project-cta">
      <button class="cta-button" 
              data-project-title="{% if CURRENT_LANG == 'uk' and project.title_uk %}{{ project.title_uk|escapejs }}{% elif CURRENT_LANG == 'pl' and project.title_pl %}{{ project.title_pl|escapejs }}{% else %}{{ project.title_en|escapejs }}{% endif %}"
              onclick="event.stopPropagation(); scrollToContact(this.dataset.projectTitle);">
        <span class="cta-icon">üí¨</span>
        <span class="cta-text">
          {% if CURRENT_LANG == 'uk' %}–ó–∞–º–æ–≤–∏—Ç–∏ —Å–æ–±—ñ —Ç–∞–∫–∏–π
          {% elif CURRENT_LANG == 'pl' %}Zam√≥w sobie
          {% else %}Get Your Own Bot{% endif %}
        </span>
        <span class="cta-arrow">‚Üí</span>
      </button>
      
      <!-- Alternative buttons -->
      <div class="secondary-actions">
        <a href="/{{ CURRENT_LANG }}/projects/{{ project.slug }}/" class="details-link" onclick="event.stopPropagation();">
          {% if CURRENT_LANG == 'uk' %}–î–µ—Ç–∞–ª—å–Ω–∏–π –∫–µ–π—Å
          {% elif CURRENT_LANG == 'pl' %}Czytaj wiƒôcej
          {% else %}Full Case{% endif %}
        </a>
        
        {% if project.project_url %}
          <a href="{{ project.project_url }}" target="_blank" class="demo-link" onclick="event.stopPropagation();">
            {% if CURRENT_LANG == 'uk' %}–î–µ–º–æ
            {% elif CURRENT_LANG == 'pl' %}Demo
            {% else %}Live Demo{% endif %}
          </a>
        {% endif %}
      </div>
    </div>
  </div>
  
  <!-- Hover effects -->
  <div class="card-glow-effect"></div>
</div>
{% load static i18n %}
{% get_current_language as CURRENT_LANG %}

<div class="projects-carousel-container" id="carousel-{{ carousel_id|default:'home' }}" aria-roledescription="carousel">
  <div class="projects-carousel-header">
    {% if title %}
      <h2 class="section-title">{{ title }}</h2>
    {% endif %}

    {% if show_navigation and projects|length > 1 %}
      <div class="carousel-navigation desktop-only">
        <button class="carousel-nav-btn prev" data-carousel="{{ carousel_id }}" data-direction="prev" aria-label="{% trans '–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ' %}">
          <i data-lucide="chevron-left"></i>
        </button>
        <button class="carousel-nav-btn next" data-carousel="{{ carousel_id }}" data-direction="next" aria-label="{% trans '–ù–∞—Å—Ç—É–ø–Ω—ñ' %}">
          <i data-lucide="chevron-right"></i>
        </button>
      </div>
    {% endif %}
  </div>

  <div class="projects-carousel-wrapper" id="{{ carousel_id }}" role="group">
    <div class="projects-carousel-track" role="list">
      {% for project in projects %}
        <div class="carousel-project-item" role="listitem">
          {% include 'includes/project_card_home.html' with project=project %}
        </div>
      {% empty %}
        <div class="carousel-project-item">
          <div class="empty-carousel-state">
            <div class="empty-icon">üìã</div>
            <p>
              {% if CURRENT_LANG == 'uk' %}–ü—Ä–æ—î–∫—Ç—ñ–≤ –ø–æ–∫–∏ –Ω–µ–º–∞—î
              {% elif CURRENT_LANG == 'pl' %}Brak projekt√≥w
              {% else %}No projects yet{% endif %}
            </p>
            <small>
              {% if CURRENT_LANG == 'uk' %}–°–∫–æ—Ä–æ –∑'—è–≤–ª—è—Ç—å—Å—è –Ω–æ–≤—ñ —Ü—ñ–∫–∞–≤—ñ –ø—Ä–æ—î–∫—Ç–∏!
              {% elif CURRENT_LANG == 'pl' %}Wkr√≥tce pojawiƒÖ siƒô new ciekawe projekty!
              {% else %}New interesting projects coming soon!{% endif %}
            </small>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>

  {% if projects|length > 1 %}
    <div class="carousel-indicators mobile-only" data-carousel="{{ carousel_id }}">
      {% for project in projects %}
        <button class="indicator{% if forloop.first %} active{% endif %}" 
                data-carousel="{{ carousel_id }}" 
                data-slide="{{ forloop.counter0 }}"
                aria-label="{% if CURRENT_LANG == 'uk' %}–ü–µ—Ä–µ–π—Ç–∏ –¥–æ —Å–ª–∞–π–¥—É {{ forloop.counter }}
                {% elif CURRENT_LANG == 'pl' %}Przejd≈∫ do slajdu {{ forloop.counter }}
                {% else %}Go to slide {{ forloop.counter }}{% endif %}">
        </button>
      {% endfor %}
    </div>
  {% endif %}
</div>
{% load static i18n %}
{% get_current_language as CURRENT_LANG %}

<section class="breadcrumbs-section">
  <div class="container">
    <nav class="breadcrumbs" aria-label="{% trans 'Breadcrumb navigation' %}">
      <ol class="breadcrumb-list">
        <li class="breadcrumb-item">
          <a href="{% url 'core:home' %}" class="breadcrumb-link">
            <i data-lucide="home" class="breadcrumb-icon"></i>
            {% trans "Home" %}
          </a>
        </li>
        <li class="breadcrumb-separator">→</li>
        
        {% if breadcrumb_items %}
          {% for item in breadcrumb_items %}
            <li class="breadcrumb-item">
              {% if item.url %}
                <a href="{{ item.url }}" class="breadcrumb-link">
                  {% if item.icon %}<i data-lucide="{{ item.icon }}" class="breadcrumb-icon"></i>{% endif %}
                  {{ item.title }}
                </a>
              {% else %}
                <span class="breadcrumb-current">
                  {% if item.icon %}<i data-lucide="{{ item.icon }}" class="breadcrumb-icon"></i>{% endif %}
                  {{ item.title }}
                </span>
              {% endif %}
            </li>
            {% if not forloop.last %}<li class="breadcrumb-separator">→</li>{% endif %}
          {% endfor %}
        {% else %}
          {% if 'projects' in request.path %}
            {% if project %}
              <li class="breadcrumb-item">
                <a href="{% url 'projects' %}" class="breadcrumb-link">
                  <i data-lucide="folder" class="breadcrumb-icon"></i>
                  {% trans "Projects" %}
                </a>
              </li>
              <li class="breadcrumb-separator">→</li>
              <li class="breadcrumb-item current" aria-current="page">
                <span class="breadcrumb-current">
                  <i data-lucide="folder-open" class="breadcrumb-icon"></i>
                  {% if title %}{{ title|safe }}{% elif project.title_uk or project.title_en %}{% if CURRENT_LANG == 'uk' and project.title_uk %}{{ project.title_uk|safe }}{% elif CURRENT_LANG == 'pl' and project.title_pl %}{{ project.title_pl|safe }}{% else %}{{ project.title_en|safe }}{% endif %}{% else %}{{ project.title|safe }}{% endif %}
                </span>
              </li>
            {% else %}
              <li class="breadcrumb-item current" aria-current="page">
                <span class="breadcrumb-current">
                  <i data-lucide="folder" class="breadcrumb-icon"></i>
                  {% trans "Projects" %}
                </span>
              </li>
            {% endif %}
          {% elif 'products' in request.path %}
            {% if product or title %}
              <li class="breadcrumb-item">
                <a href="{% url 'products:product_list' %}" class="breadcrumb-link">
                  <i data-lucide="package" class="breadcrumb-icon"></i>
                  {% trans "Products" %}
                </a>
              </li>
              <li class="breadcrumb-separator">→</li>
              <li class="breadcrumb-item current" aria-current="page">
                <span class="breadcrumb-current">
                  <i data-lucide="package-open" class="breadcrumb-icon"></i>
                  {% if product %}{{ title|safe }}{% elif title %}{{ title|safe }}{% endif %}
                </span>
              </li>
            {% else %}
              <li class="breadcrumb-item current" aria-current="page">
                <span class="breadcrumb-current">
                  <i data-lucide="package" class="breadcrumb-icon"></i>
                  {% trans "Products" %}
                </span>
              </li>
            {% endif %}
          {% elif 'services' in request.path %}
            {% if service or service_category %}
              <li class="breadcrumb-item">
                <a href="{% url 'services:services_list' %}" class="breadcrumb-link">
                  <i data-lucide="settings" class="breadcrumb-icon"></i>
                  {% trans "Services" %}
                </a>
              </li>
              <li class="breadcrumb-separator">→</li>
              <li class="breadcrumb-item current" aria-current="page">
                <span class="breadcrumb-current">
                  <i data-lucide="cog" class="breadcrumb-icon"></i>
                  {% if service %}{{ service.title|safe }}{% elif service_category %}{{ service_category.get_title|safe }}{% endif %}
                </span>
              </li>
            {% else %}
              <li class="breadcrumb-item current" aria-current="page">
                <span class="breadcrumb-current">
                  <i data-lucide="settings" class="breadcrumb-icon"></i>
                  {% trans "Services" %}
                </span>
              </li>
            {% endif %}
          {% elif 'news' in request.path %}
            {% if article %}
              <li class="breadcrumb-item">
                <a href="{% url 'news:news_list' %}" class="breadcrumb-link">
                  <i data-lucide="newspaper" class="breadcrumb-icon"></i>
                  {% trans "News" %}
                </a>
              </li>
              <li class="breadcrumb-separator">→</li>
              <li class="breadcrumb-item current" aria-current="page">
                <span class="breadcrumb-current">
                  <i data-lucide="file-text" class="breadcrumb-icon"></i>
                  {{ article.title|safe }}
                </span>
              </li>
            {% else %}
              <li class="breadcrumb-item current" aria-current="page">
                <span class="breadcrumb-current">
                  <i data-lucide="newspaper" class="breadcrumb-icon"></i>
                  {% trans "News" %}
                </span>
              </li>
            {% endif %}
          {% elif 'contacts' in request.path %}
            <li class="breadcrumb-item current" aria-current="page">
              <span class="breadcrumb-current">
                <i data-lucide="mail" class="breadcrumb-icon"></i>
                {% trans "Contacts" %}
              </span>
            </li>
          {% elif 'about' in request.path %}
            <li class="breadcrumb-item current" aria-current="page">
              <span class="breadcrumb-current">
                <i data-lucide="info" class="breadcrumb-icon"></i>
                {% trans "About" %}
              </span>
            </li>
          {% endif %}
        {% endif %}
      </ol>
    </nav>
  </div>
</section>


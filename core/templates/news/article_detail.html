{% extends "core/base.html" %}
{% load static i18n %}
{% get_current_language as CURRENT_LANG %}

{% block title %}{{ page_title }}{% endblock %}
{% block meta_description %}{{ page_description }}{% endblock %}
{% block extra_meta %}
<script type="application/ld+json">
{{ structured_data|safe }}
</script>
{% endblock %}
{% block content %}
<article class="news-detail-page">
  <!-- –ì–µ—Ä–æ–π —Å–µ–∫—Ü—ñ—è -->
  <section class="news-hero">
    <div class="container">
      
      <!-- –ö–∞—Ç–µ–≥–æ—Ä—ñ—è —Ç–∞ –º–µ—Ç–∞ —ñ–Ω—Ñ–æ -->
      <div class="article-meta">
        <span class="category-badge">
          {{ article.category.icon }} 
          {{ article.category.get_name }}
        </span>
        
        {% if article.is_top_article %}
          <span class="top-article-badge">üëë TOP</span>
        {% endif %}
        
        {% if article.priority >= 3 %}
          <span class="priority-badge">üî• HOT</span>
        {% endif %}
      </div>

      <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
      <h2>
        {{ article.get_title|safe }}
      </h2>

      <!-- –ú–µ—Ç–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è -->
      <div class="article-info">
        <time datetime="{{ article.published_at|date:'c' }}" class="publish-date">
          üìÖ {{ article.published_at|date:'j F Y' }}
        </time>
        <span class="reading-time">‚è±Ô∏è {{ article.get_reading_time }} —Ö–≤ —á–∏—Ç–∞–Ω–Ω—è</span>
        <span class="views-count">üëÅÔ∏è {{ article.get_total_views }} –ø–µ—Ä–µ–≥–ª—è–¥—ñ–≤</span>
        {% if article.original_source_url and article.original_source_name %}
          <span class="source-info">
            üîó <a href="{{ article.original_source_url }}" target="_blank" rel="nofollow noopener">{{ article.original_source_name }}</a>
          </span>
        {% endif %}
      </div>
    </div>
  </section>

  <!-- AI –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è -->
  {% if article.ai_image_url %}
    <section class="article-image">
      <div class="container">
        <div class="image-container glass">
          <img src="{{ article.ai_image_url }}" 
               alt="{% if CURRENT_LANG == 'uk' and article.title_uk %}{{ article.title_uk|safe }}{% elif CURRENT_LANG == 'pl' and article.title_pl %}{{ article.title_pl|safe }}{% else %}{{ article.title_en|safe }}{% endif %}" 
               loading="lazy"
               style="width: 100%; height: auto; object-fit: contain; border-radius: var(--radius-xl);">
        </div>
      </div>
    </section>
  {% endif %}

  <!-- –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
  <section class="article-content">
    <div class="container">
      <div class="content-layout">
        
        <!-- –û—Å–Ω–æ–≤–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ -->
        <div class="main-content">
          
          <!-- –ö–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å -->
          <div class="article-summary glass">
            <div class="summary-icon">üí°</div>
            <div class="summary-content">
              {{ article.get_summary|safe }}
            </div>
          </div>

          <!-- –ë—ñ–∑–Ω–µ—Å —ñ–Ω—Å–∞–π—Ç -->
          <div class="business-insight card card-lg" style="margin-top: 2rem; margin-bottom: 2rem;">
            <div class="card-header">
              <div class="card-icon">üéØ</div>
              <h2>
                {% trans "Business Impact" %}
              </h2>
            </div>
            <div class="card-content">
              {{ article.get_business_insight|safe }}
            </div>
          </div>

          <!-- –¶—ñ–∫–∞–≤–∏–Ω–∫–∏ (—è–∫—â–æ —î) -->
          {% if article.get_interesting_facts %}
            <div class="interesting-facts glass">
              <h2>
                <span>‚ú®</span>
                {% trans "Interesting Facts" %}
              </h2>
              <ul class="facts-list">
                {% for fact in article.get_interesting_facts %}
                  <li class="fact-item">{{ fact }}</li>
                {% endfor %}
              </ul>
            </div>
          {% endif %}

          <!-- –ë—ñ–∑–Ω–µ—Å –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ (—è–∫—â–æ —î) -->
          {% if article.business_opportunities_en or article.business_opportunities_uk or article.business_opportunities_pl %}
            <div class="business-opportunities card card-lg" style="margin-top: 2rem; margin-bottom: 2rem;">
              <div class="card-header">
                <div class="card-icon">üöÄ</div>
                <h2>
                  {% trans "Business Opportunities" %}
                </h2>
              </div>
              <div class="card-content">
                <div class="opportunities-content">
                  {{ article.get_business_opportunities|safe }}
                </div>
              </div>
            </div>
          {% endif %}

          <!-- LAZYSOFT —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó -->
          {% if article.lazysoft_recommendations_en or article.lazysoft_recommendations_uk or article.lazysoft_recommendations_pl %}
            <div class="lazysoft-recommendations card card-lg" style="margin-top: 2rem; margin-bottom: 2rem;">
              <div class="card-header">
                <div class="card-icon">üéØ</div>
                <h2>
                  {% trans "LAZYSOFT Recommendations" %}
                </h2>
              </div>
              <div class="card-content">
                <div class="recommendations-content">
                  {{ article.get_lazysoft_recommendations|safe }}
                </div>
              </div>
            </div>
          {% endif %}
        </div>

        <!-- –°–∞–π–¥–±–∞—Ä -->
        <aside class="article-sidebar">
          

          <!-- CTA –±–ª–æ–∫ -->
          <div class="sidebar-block cta-block glass">
            <h3>
              {% trans "Need Automation?" %}
            </h3>
            <p>
              {% trans "Let's discuss how this technology can transform your business" %}
            </p>
            <button class="cta-button" onclick="window.ctaModal && window.ctaModal.show('news_article', '–°—Ç–∞—Ç—Ç—è: {{ article.get_title|escapejs }}');">
              <span class="button-icon">üí¨</span>
              {% trans "Let's Talk" %}
            </button>
          </div>

          <!-- –°—Ö–æ–∂—ñ —Å—Ç–∞—Ç—Ç—ñ -->
          {% if related_articles %}
            <div class="sidebar-block related-articles glass">
              <h3>
                {% trans "Related News" %}
              </h3>
              <div class="related-list">
                {% for related in related_articles %}
                  <a href="{{ related.get_absolute_url }}" class="related-item">
                    <p>{{ related.get_title|truncatewords:10 }}</p
                    <p>
                      {{ related.category.icon }} {{ related.published_at|date:'j.m' }}
                    </p>
                  </a>
                {% endfor %}
              </div>
            </div>
          {% endif %}

          {% if related_projects %}
            <section class="related-projects">
              <h3>{% trans "–ü–æ–≤'—è–∑–∞–Ω—ñ –ø—Ä–æ—î–∫—Ç–∏" %}</h3>
              <div class="cards-grid">
                {% for p in related_projects %}
                  <a href="/{{ CURRENT_LANG }}/projects/{{ p.slug }}/" class="project-card glass">
                    {% if p.featured_image %}
                      <img src="{{ p.featured_image }}" alt="{{ p.title }}">
                    {% endif %}
                    <h3>{{ p.title }}</h3>
                    <p>{{ p.short_description }}</p>
                  </a>
                {% endfor %}
              </div>
            </section>
          {% endif %}

          {% if related_services %}
            <section class="related-services">
              <h3>{% trans "–ü–æ–≤'—è–∑–∞–Ω—ñ –ø–æ—Å–ª—É–≥–∏" %}</h3>
              <div class="cards-grid">
                {% for s in related_services %}
                  <a href="/{{ CURRENT_LANG }}/services/{{ s.slug }}/" class="service-card glass">
                    {% if s.featured_image %}
                      <img src="{{ s.featured_image }}" alt="{{ s.title }}">
                    {% endif %}
                    <h3>{{ s.title }}</h3>
                    <p>{{ s.short_description }}</p>
                  </a>
                {% endfor %}
              </div>
            </section>
          {% endif %}
        </aside>
      </div>
    </div>
  </section>

  <!-- –ù–∞–≤—ñ–≥–∞—Ü—ñ—è -->
  <section class="article-navigation">
    <div class="container">
      <div class="nav-links">
        <a href="/{{ CURRENT_LANG }}/news/" class="nav-link back">
          <span class="nav-icon">‚Üê</span>
          {% trans "All Tech News" %}
        </a>
        
  </section>

  <!-- –°–æ—Ü—ñ–∞–ª—å–Ω—ñ –º–µ—Ä–µ–∂—ñ -->
  {% include 'includes/social_share.html' %}

</article>


{% endblock %}
{% extends "core/base.html" %}
{% load static i18n %}
{% get_current_language as CURRENT_LANG %}

{% block title %}{{ page_title }}{% endblock %}
{% block meta_description %}{{ page_description }}{% endblock %}
{% block og_title %}{{ page_title }}{% endblock %}
{% block og_description %}{{ page_description }}{% endblock %}
{% block og_image %}https://lazysoft.dev/static/images/news-og.jpg{% endblock %}

{% block extra_meta %}
  <link rel="canonical" href="https://lazysoft.dev{{ request.path }}" />
  
  <!-- Hreflang -->
  <link rel="alternate" href="https://lazysoft.dev/en/news/" hreflang="en">
  <link rel="alternate" href="https://lazysoft.dev/uk/news/" hreflang="uk">
  <link rel="alternate" href="https://lazysoft.dev/pl/news/" hreflang="pl">
  
  <!-- Structured Data -->
  <script type="application/ld+json">
  {{ structured_data|safe }}
  </script>
{% endblock %}

{% block content %}
<main class="news-page">

  <!-- Hero Section -->
<<<<<<< HEAD
<section class="news-header py-16">
  <div class="container max-w-4xl mx-auto text-center">
    {% if current_category %}
      <!-- Category Page -->
      <div style="display: flex; justify-content: center; align-items: center; margin-bottom: 20px;">
        <span style="font-size: 4rem; margin-right: 20px;">{{ current_category.icon }}</span>
        <div>
          <h1 data-lang="en">{{ current_category.name_en|safe }}</h1>
          <h1 data-lang="uk" class="active">{{ current_category.name_uk|safe }}</h1>
          <h1 data-lang="pl">{{ current_category.name_pl|safe }}</h1>
        </div>
      </div>
      <p data-lang="en">{{ current_category.description_en|safe }}</p>
      <p data-lang="uk" class="active">{{ current_category.description_uk|safe }}</p>
      <p data-lang="pl">{{ current_category.description_pl|safe }}</p>
    {% else %}
      <!-- Main News Page -->
      <h1 class="neon-text" data-lang="en">üß† TECH INSIGHTS by LAZYSOFT</h1>
      <h1 class="neon-text" data-lang="uk" class="active">üß† TECH –Ü–ù–°–ê–ô–¢–ò –≤—ñ–¥ LAZYSOFT</h1>
      <h1 class="neon-text" data-lang="pl">üß† TECH INSIGHTS od LAZYSOFT</h1>
      
      <p data-lang="en">Not just news ‚Äî business insights for European entrepreneurs</p>
      <p data-lang="uk" class="active">–ù–µ –ø—Ä–æ—Å—Ç–æ –Ω–æ–≤–∏–Ω–∏ ‚Äî –±—ñ–∑–Ω–µ—Å-—ñ–Ω—Å–∞–π—Ç–∏ –¥–ª—è —î–≤—Ä–æ–ø–µ–π—Å—å–∫–∏—Ö –ø—ñ–¥–ø—Ä–∏—î–º—Ü—ñ–≤</p>
      <p data-lang="pl">Nie tylko wiadomo≈õci ‚Äî biznesowe wglƒÖdy dla europejskich przedsiƒôbiorc√≥w</p>
    {% endif %}

    {# –ê—Ä—Ö—ñ–≤–Ω–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è #}
    {% if archive_date %}
    <div class="archive-nav mt-6 flex justify-between items-center text-sm opacity-80">
      <a href="{% url 'news:news_by_date' prev_date %}" class="hover:underline">‚Üê {% trans "–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –¥–µ–Ω—å" %}</a>
      <span>{{ archive_date }}</span>
      <a href="{% url 'news:news_by_date' next_date %}" class="hover:underline">{% trans "–ù–∞—Å—Ç—É–ø–Ω–∏–π –¥–µ–Ω—å" %} ‚Üí</a>
    </div>
    {% endif %}
  </div>
</section>

=======
  <section class="news-header py-16">
    <div class="container max-w-4xl mx-auto text-center">
      {% if current_category %}
        <!-- Category Page -->
        <div style="display: flex; justify-content: center; align-items: center; margin-bottom: 20px;">
          <span style="font-size: 4rem; margin-right: 20px;">{{ current_category.icon }}</span>
          <div>
            <h1 data-lang="en">{{ current_category.name_en|safe }}</h1>
            <h1 data-lang="uk" class="active">{{ current_category.name_uk|safe }}</h1>
            <h1 data-lang="pl">{{ current_category.name_pl|safe }}</h1>
          </div>
        </div>
        <p data-lang="en">{{ current_category.description_en|safe }}</p>
        <p data-lang="uk" class="active">{{ current_category.description_uk|safe }}</p>
        <p data-lang="pl">{{ current_category.description_pl|safe }}</p>
      {% else %}
        <!-- Main News Page -->
        <h1 class="neon-text" data-lang="en">üß† TECH INSIGHTS by LAZYSOFT</h1>
        <h1 class="neon-text" data-lang="uk" class="active">üß† TECH –Ü–ù–°–ê–ô–¢–ò –≤—ñ–¥ LAZYSOFT</h1>
        <h1 class="neon-text" data-lang="pl">üß† TECH INSIGHTS od LAZYSOFT</h1>
        
        <p data-lang="en">Not just news ‚Äî business insights for European entrepreneurs</p>
        <p data-lang="uk" class="active">–ù–µ –ø—Ä–æ—Å—Ç–æ –Ω–æ–≤–∏–Ω–∏ ‚Äî –±—ñ–∑–Ω–µ—Å-—ñ–Ω—Å–∞–π—Ç–∏ –¥–ª—è —î–≤—Ä–æ–ø–µ–π—Å—å–∫–∏—Ö –ø—ñ–¥–ø—Ä–∏—î–º—Ü—ñ–≤</p>
        <p data-lang="pl">Nie tylko wiadomo≈õci ‚Äî biznesowe wglƒÖdy dla europejskich przedsiƒôbiorc√≥w</p>
      {% endif %}
    </div>
  </section>
>>>>>>> 142845d815461c20abde0a26113510140e4bdce2

  <!-- Moving Tech Stack Banner -->
  <div class="tech-stack">
    <span class="tech-item">ü§ñ AI News</span>
    <span class="tech-item">‚ö° Automation</span>
    <span class="tech-item">üîß CRM</span>
    <span class="tech-item">üìà SEO</span>
    <span class="tech-item">üì± Social Media</span>
    <span class="tech-item">üí¨ Chatbots</span>
    <span class="tech-item">üõí E-commerce</span>
    <span class="tech-item">üí∞ Fintech</span>
    <span class="tech-item">üè¢ Corporate</span>
    <span class="tech-item">üåê Tech Trends</span>
  </div>

  <!-- Categories Navigation -->
  <section class="categories-nav py-8">
    <div class="container max-w-6xl mx-auto">
      <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin-bottom: 30px;">
        <a href="{% url 'news:news_list' %}" 
           class="category-btn glass {% if not current_category %}active{% endif %}">
          üì∞ 
          <span data-lang="en">All News</span>
          <span data-lang="uk" class="active">–í—Å—ñ –Ω–æ–≤–∏–Ω–∏</span>
          <span data-lang="pl">Wszystkie wiadomo≈õci</span>
        </a>
        
        {% for category in categories %}
        <a href="{% url 'news:news_category' category.slug %}" 
           class="category-btn glass {% if current_category.slug == category.slug %}active{% endif %}">
          {{ category.icon }} 
          <span data-lang="en">{{ category.name_en }}</span>
          <span data-lang="uk" class="active">{{ category.name_uk }}</span>
          <span data-lang="pl">{{ category.name_pl }}</span>
          <small>({{ category.articles_count }})</small>
        </a>
        {% endfor %}
      </div>
      
      <!-- Search Form -->
      <div style="display: flex; justify-content: center;">
        <form method="GET" style="position: relative; max-width: 400px; width: 100%;">
          <input type="search" 
                 name="search" 
                 value="{{ search_query }}" 
                 placeholder="üîç Search tech news..." 
                 style="width: 100%; padding: 12px 50px 12px 20px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 25px; color: white; font-size: 16px;">
          <button type="submit" 
                  style="position: absolute; right: 15px; top: 50%; transform: translateY(-50%); background: none; border: none; color: var(--accent-green); font-size: 18px; cursor: pointer;">
            üîç
          </button>
        </form>
      </div>
    </div>
  </section>

  <!-- Category CTA (—è–∫—â–æ —î) -->
  {% if current_category and current_category.cta_title_uk %}
  <section class="category-cta py-8">
    <div class="container max-w-4xl mx-auto">
      <div class="service-card" style="text-align: center;">
        <div class="service-text">
          <h3 data-lang="en">{{ current_category.cta_title_en|safe }}</h3>
          <h3 data-lang="uk" class="active">{{ current_category.cta_title_uk|safe }}</h3>
          <h3 data-lang="pl">{{ current_category.cta_title_pl|safe }}</h3>
          
          <p data-lang="en">{{ current_category.cta_description_en|safe }}</p>
          <p data-lang="uk" class="active">{{ current_category.cta_description_uk|safe }}</p>
          <p data-lang="pl">{{ current_category.cta_description_pl|safe }}</p>
          
          <a href="{{ current_category.cta_link }}" style="display: inline-block; margin-top: 15px; padding: 12px 30px; background: var(--accent-green); color: black; border-radius: 25px; text-decoration: none; font-weight: bold;">
            <span data-lang="en">{{ current_category.cta_button_text_en }} ‚Üí</span>
            <span data-lang="uk" class="active">{{ current_category.cta_button_text_uk }} ‚Üí</span>
            <span data-lang="pl">{{ current_category.cta_button_text_pl }} ‚Üí</span>
          </a>
        </div>
      </div>
    </div>
  </section>
  {% endif %}

  <!-- Articles Grid -->
  <section id="articles" class="projects">
    <div class="container-reg">
      {% if articles %}
        <div class="projects-carousel">
          <div class="projects-container">
            {% for article in articles %}
            <article class="project-card clickable" data-href="{{ article.get_absolute_url }}">
              
              <!-- AI Generated Image -->
              {% if article.ai_image_url %}
                <img src="{{ article.ai_image_url }}" 
                     alt="{{ article.get_title }}" 
                     loading="lazy"
                     style="border-radius: 12px; margin-bottom: 20px;">
              {% endif %}
              
              <!-- Category & Meta -->
              <div class="news-card-meta" style="margin-bottom: 15px;">
                <span class="chip">
                  {{ article.category.icon }}
                  <span data-lang="en">{{ article.category.name_en }}</span>
                  <span data-lang="uk" class="active">{{ article.category.name_uk }}</span>
                  <span data-lang="pl">{{ article.category.name_pl }}</span>
                </span>
                
                {% if article.is_top_article %}
                  <span class="chip priority-high">üèÜ TOP</span>
                {% endif %}
                
                {% if article.priority >= 3 %}
                  <span class="chip priority-high">üî• HOT</span>
                {% endif %}
              </div>

              <!-- Article Title -->
              <h4 data-lang="en">{{ article.title_en|safe }}</h4>
              <h4 data-lang="uk" class="active">{{ article.title_uk|safe }}</h4>
              <h4 data-lang="pl">{{ article.title_pl|safe }}</h4>

              <!-- Summary -->
              <p data-lang="en">{{ article.summary_en|safe|truncatewords:20 }}</p>
              <p data-lang="uk" class="active">{{ article.summary_uk|safe|truncatewords:20 }}</p>
              <p data-lang="pl">{{ article.summary_pl|safe|truncatewords:20 }}</p>

              <!-- Meta Info -->
              <div class="news-card-meta">
                <time datetime="{{ article.published_at|date:'c' }}">üìÖ {{ article.published_at|date:'j.m.Y' }}</time>
                <span>üëÅÔ∏è {{ article.get_total_views }}</span>
                <span>‚è±Ô∏è {{ article.get_reading_time }}—Ö–≤</span>
                <span class="cta-arrow">‚Üí</span>
              </div>
            </article>
            {% endfor %}
          </div>
        </div>

        <!-- Pagination -->
        {% if is_paginated %}
        <div style="display: flex; justify-content: center; margin-top: 40px;">
          <nav style="display: flex; align-items: center; gap: 15px;">
            {% if page_obj.has_previous %}
            <a href="?page={{ page_obj.previous_page_number }}" 
               style="padding: 10px 20px; background: rgba(255,255,255,0.1); border-radius: 25px; color: var(--accent-green); text-decoration: none;">
              ‚Üê 
              <span data-lang="en">Previous</span>
              <span data-lang="uk" class="active">–ü–æ–ø–µ—Ä–µ–¥–Ω—è</span>
              <span data-lang="pl">Poprzednia</span>
            </a>
            {% endif %}
            
            <span style="padding: 10px 20px; background: var(--accent-green); color: black; border-radius: 25px; font-weight: bold;">
              {{ page_obj.number }} / {{ page_obj.paginator.num_pages }}
            </span>
            
            {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}" 
               style="padding: 10px 20px; background: rgba(255,255,255,0.1); border-radius: 25px; color: var(--accent-green); text-decoration: none;">
              <span data-lang="en">Next</span>
              <span data-lang="uk" class="active">–ù–∞—Å—Ç—É–ø–Ω–∞</span>
              <span data-lang="pl">Nastƒôpna</span>
              ‚Üí
            </a>
            {% endif %}
          </nav>
        </div>
        {% endif %}
        
      {% else %}
        <!-- No Articles -->
        <div style="text-align: center; padding: 80px 20px;">
          <div style="font-size: 5rem; margin-bottom: 30px;">üì∞</div>
          <h3 data-lang="en">No news yet in this category</h3>
          <h3 data-lang="uk" class="active">–ü–æ–∫–∏ —â–æ –Ω–µ–º–∞—î –Ω–æ–≤–∏–Ω –≤ —Ü—ñ–π –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó</h3>
          <h3 data-lang="pl">Jeszcze brak wiadomo≈õci w tej kategorii</h3>
          
          <p style="color: var(--text-secondary); margin-top: 15px;">
            <span data-lang="en">Fresh tech insights are coming soon. Check back later!</span>
            <span data-lang="uk" class="active">–°–≤—ñ–∂—ñ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω—ñ —ñ–Ω—Å–∞–π—Ç–∏ –∑'—è–≤–ª—è—Ç—å—Å—è –Ω–µ–∑–∞–±–∞—Ä–æ–º. –ü–æ–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –ø—ñ–∑–Ω—ñ—à–µ!</span>
            <span data-lang="pl">≈öwie≈ºe technologiczne wglƒÖdy pojawiƒÖ siƒô wkr√≥tce. Sprawd≈∫ p√≥≈∫niej!</span>
          </p>
          
          <a href="{% url 'news:news_list' %}" 
             style="display: inline-block; margin-top: 20px; color: var(--accent-green); text-decoration: none;">
            <span data-lang="en">‚Üê View all news</span>
            <span data-lang="uk" class="active">‚Üê –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –≤—Å—ñ –Ω–æ–≤–∏–Ω–∏</span>
            <span data-lang="pl">‚Üê Zobacz wszystkie wiadomo≈õci</span>
          </a>
        </div>
      {% endif %}
    </div>
  </section>

  <!-- Social Sharing -->
  <section class="social-sharing" style="text-align: center; padding: 40px 0;">
    <p style="margin-bottom: 15px; color: var(--text-secondary);">
      <span data-lang="en">Share this page:</span>
      <span data-lang="uk" class="active">–ü–æ–¥—ñ–ª–∏—Ç–∏—Å—è —Å—Ç–æ—Ä—ñ–Ω–∫–æ—é:</span>
      <span data-lang="pl">Udostƒôpnij tƒô stronƒô:</span>
    </p>
    <div style="display: flex; justify-content: center; gap: 20px;">
      <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}" 
         target="_blank" 
         style="color: var(--accent-green); text-decoration: none;">
        üìò Facebook
      </a>
      <a href="https://twitter.com/intent/tweet?url={{ request.build_absolute_uri }}" 
         target="_blank" 
         style="color: var(--accent-green); text-decoration: none;">
        üê¶ Twitter
      </a>
      <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ request.build_absolute_uri }}" 
         target="_blank" 
         style="color: var(--accent-green); text-decoration: none;">
        üíº LinkedIn
      </a>
    </div>
  </section>

</main>
{% endblock %}

{% block extra_scripts %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "{{ page_title|escapejs }}",
  "description": "{{ page_description|escapejs }}",
  "url": "https://lazysoft.dev{{ request.path }}",
  "inLanguage": "{{ CURRENT_LANG }}",
  "publisher": {
    "@type": "Organization",
    "name": "LAZYSOFT",
    "logo": {
      "@type": "ImageObject",
      "url": "https://lazysoft.dev/static/images/logo.png"
    }
  },
  "mainEntity": {
    "@type": "ItemList",
    "itemListElement": [
      {% for article in articles %}
      {
        "@type": "ListItem",
        "position": {{ forloop.counter }},
        "url": "https://lazysoft.dev{{ article.get_absolute_url }}",
        "name": "{{ article.get_title|escapejs }}"
      }{% if not forloop.last %},{% endif %}
      {% endfor %}
    ]
  }
}
</script>
{% endblock %}
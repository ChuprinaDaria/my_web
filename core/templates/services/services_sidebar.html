{% load static i18n %}
{% get_current_language as CURRENT_LANG %}

<aside class="services-sidebar">
  
  <div class="sidebar-section">
    <h3>
      <i data-lucide="grid-3x3"></i>
      {% trans "Related Projects" %}
    </h3>
    {% if related_projects %}
      <div class="related-projects-list">
        {% for project in related_projects %}
          <a href="/{{ CURRENT_LANG }}/projects/{{ project.slug }}/" class="project-item">
            <div class="project-icon">
              {% if project.featured_image %}
                <img src="{{ project.featured_image.url }}" alt="{{ project.title_en }}" loading="lazy">
              {% else %}
                <span>ðŸš€</span>
              {% endif %}
            </div>
            <div class="project-info">
              <span class="project-name">
                {% if CURRENT_LANG == 'uk' and project.title_uk %}{{ project.title_uk }}
                {% elif CURRENT_LANG == 'pl' and project.title_pl %}{{ project.title_pl }}
                {% else %}{{ project.title_en }}{% endif %}
              </span>
              <small class="project-description">
                {% if CURRENT_LANG == 'uk' and project.short_description_uk %}{{ project.short_description_uk|striptags|truncatewords:8 }}
                {% elif CURRENT_LANG == 'pl' and project.short_description_pl %}{{ project.short_description_pl|striptags|truncatewords:8 }}
                {% else %}{{ project.short_description_en|striptags|truncatewords:8 }}{% endif %}
              </small>
            </div>
          </a>
        {% endfor %}
      </div>
    {% else %}
      <p style="color: var(--text-secondary); text-align: center; padding: 20px;">
        {% trans "No related projects available" %}
      </p>
    {% endif %}
  </div>

<div class="sidebar-section glass card cta-sidebar">
    <h3>
      <i data-lucide="sparkles"></i>
      {% trans "Need Custom Project?" %}
    </h3>
    <p class="cta-description">
      {% trans "Let's create something unique for your business. From automation to custom solutions." %}
    </p>
    <button class="sidebar-cta-button" 
            data-project-title="{% trans 'Custom Project Development' %}"
            onclick="window.ctaModal && window.ctaModal.show('services_sidebar', 'ÐŸÑ€Ð¾Ñ”ÐºÑ‚: ' + this.dataset.projectTitle);">
      <i data-lucide="arrow-right"></i>
      {% trans "Start Project" %}
    </button>
    
    <div class="cta-features">
      <div class="cta-feature">
        <i data-lucide="zap"></i>
        <span>{% trans "Fast Development" %}</span>
      </div>
      <div class="cta-feature">
        <i data-lucide="shield-check"></i>
        <span>{% trans "Quality Guarantee" %}</span>
      </div>
      <div class="cta-feature">
        <i data-lucide="headphones"></i>
        <span>{% trans "Full Support" %}</span>
      </div>
    </div>
  </div>

</aside>

<script src="{% static 'js/services_sidebar.js' %}"></script>

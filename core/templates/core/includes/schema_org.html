{% load static %}
{% load i18n %}

<!-- Schema.org Organization -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "@id": "{{ SITE_URL }}#organization",
  "name": "{{ SITE_NAME }}",
  "url": "{{ SITE_URL }}",
  "logo": {
    "@type": "ImageObject",
    "url": "{{ SITE_URL }}{% static 'images/logo.png' %}",
    "width": 200,
    "height": 60
  },
  "description": "{% if LANGUAGE_CODE == 'uk' %}Автоматизація та веб-розробка для бізнесу. Створюємо боти, AI рішення та сучасні веб-додатки.{% elif LANGUAGE_CODE == 'pl' %}Automatyzacja i tworzenie stron internetowych dla biznesu. Tworzymy boty, rozwiązania AI i nowoczesne aplikacje webowe.{% else %}Business automation and web development. We create bots, AI solutions and modern web applications.{% endif %}",
  "foundingDate": "2023",
  "numberOfEmployees": {
    "@type": "QuantitativeValue",
    "minValue": 1,
    "maxValue": 10
  },
  "areaServed": [
    {
      "@type": "Country",
      "name": "Poland"
    },
    {
      "@type": "Country", 
      "name": "Ukraine"
    },
    {
      "@type": "Country",
      "name": "Germany"
    },
    {
      "@type": "Country",
      "name": "United States"
    }
  ],
  "serviceType": [
    "Web Development",
    "Process Automation", 
    "AI Integration",
    "Chatbot Development",
    "Business Consulting",
    "Custom Software Development"
  ],
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "Edwarda Dembowskiego 98/1",
    "addressLocality": "Wrocław",
    "postalCode": "51-669",
    "addressCountry": "PL"
  },
  "contactPoint": [
    {
      "@type": "ContactPoint",
      "telephone": "+48-727-842-737",
      "contactType": "Customer Service",
      "email": "dchuprina@lazysoft.pl",
      "availableLanguage": ["English", "Polish", "Ukrainian"],
      "areaServed": "Worldwide"
    }
  ],
  "sameAs": [
    "https://www.linkedin.com/company/lazysoft-pl",
    "https://github.com/Lazysoft-pl",
    "https://t.me/Lazysoft_news"
  ],
  "hasOfferCatalog": {
    "@type": "OfferCatalog",
    "name": "{% if LANGUAGE_CODE == 'uk' %}Послуги автоматизації{% elif LANGUAGE_CODE == 'pl' %}Usługi automatyzacji{% else %}Automation Services{% endif %}",
    "itemListElement": [
      {
        "@type": "Offer",
        "itemOffered": {
          "@type": "Service",
          "name": "{% if LANGUAGE_CODE == 'uk' %}Розробка чат-ботів{% elif LANGUAGE_CODE == 'pl' %}Tworzenie chatbotów{% else %}Chatbot Development{% endif %}"
        }
      },
      {
        "@type": "Offer", 
        "itemOffered": {
          "@type": "Service",
          "name": "{% if LANGUAGE_CODE == 'uk' %}AI автоматизація{% elif LANGUAGE_CODE == 'pl' %}Automatyzacja AI{% else %}AI Automation{% endif %}"
        }
      },
      {
        "@type": "Offer",
        "itemOffered": {
          "@type": "Service", 
          "name": "{% if LANGUAGE_CODE == 'uk' %}Веб-розробка{% elif LANGUAGE_CODE == 'pl' %}Tworzenie stron internetowych{% else %}Web Development{% endif %}"
        }
      }
    ]
  }
}
</script>

<!-- WebSite Schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "@id": "{{ SITE_URL }}#website",
  "name": "{{ SITE_NAME }}",
  "url": "{{ SITE_URL }}",
  "description": "{% if LANGUAGE_CODE == 'uk' %}Автоматизація та веб-розробка для бізнесу{% elif LANGUAGE_CODE == 'pl' %}Automatyzacja i tworzenie stron internetowych dla biznesu{% else %}Business automation and web development{% endif %}",
  "publisher": {
    "@type": "Organization",
    "@id": "{{ SITE_URL }}#organization"
  },
  "potentialAction": {
    "@type": "SearchAction",
    "target": {
      "@type": "EntryPoint",
      "urlTemplate": "{{ SITE_URL }}/{{ LANGUAGE_CODE }}/search/?q={search_term_string}"
    },
    "query-input": "required name=search_term_string"
  },
  "inLanguage": ["uk", "pl", "en"],
  "mainEntity": {
    "@type": "Organization",
    "@id": "{{ SITE_URL }}#organization"
  }
}
</script>

<!-- BreadcrumbList Schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "{% if LANGUAGE_CODE == 'uk' %}Головна{% elif LANGUAGE_CODE == 'pl' %}Strona główna{% else %}Home{% endif %}",
      "item": "{{ SITE_URL }}/{% if LANGUAGE_CODE != 'en' %}{{ LANGUAGE_CODE }}/{% endif %}"
    }
    {% if breadcrumbs %}
    {% for crumb in breadcrumbs %}
    ,{
      "@type": "ListItem",
      "position": {{ forloop.counter|add:1 }},
      "name": "{{ crumb.name }}",
      "item": "{{ SITE_URL }}{{ crumb.url }}"
    }
    {% endfor %}
    {% endif %}
  ]
}
</script>

<!-- Conditional schemas based on page type -->
{% if article %}
<!-- Article Schema for News -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "NewsArticle",
  "headline": "{{ article.get_title|truncatechars:110|escapejs }}",
  "description": "{{ article.get_summary|truncatechars:160|escapejs }}",
  "image": {% if article.ai_image_url %}"{{ article.ai_image_url }}"{% elif article.featured_image %}"{{ SITE_URL }}{{ article.featured_image.url }}"{% else %}"{{ SITE_URL }}{% static 'images/default-news.png' %}"{% endif %},
  "datePublished": "{{ article.published_at|date:'c' }}",
  "dateModified": "{{ article.updated_at|date:'c' }}",
  "author": {
    "@type": "Organization",
    "@id": "{{ SITE_URL }}#organization",
    "name": "{{ SITE_NAME }}",
    "url": "{{ SITE_URL }}"
  },
  "publisher": {
    "@type": "Organization",
    "@id": "{{ SITE_URL }}#organization",
    "name": "{{ SITE_NAME }}",
    "url": "{{ SITE_URL }}",
    "logo": {
      "@type": "ImageObject",
      "url": "{{ SITE_URL }}{% static 'images/logo.png' %}",
      "width": 200,
      "height": 60
    }
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ SITE_URL }}{{ article.get_absolute_url }}"
  },
  "url": "{{ SITE_URL }}{{ article.get_absolute_url }}",
  "articleSection": "{{ article.category.get_name|escapejs }}",
  "inLanguage": "{{ LANGUAGE_CODE }}",
  "keywords": "{% for takeaway in article.key_takeaways_en %}{{ takeaway|escapejs }}{% if not forloop.last %}, {% endif %}{% endfor %}",
  "wordCount": "{{ article.get_word_count }}",
  "timeRequired": "PT{{ article.get_reading_time }}M",
  "isAccessibleForFree": true,
  "genre": "Technology News"
}
</script>
{% endif %}

{% if project %}
<!-- CreativeWork Schema for Projects (Portfolio Items) -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "CreativeWork",
  "name": "{{ project.get_title|escapejs }}",
  "description": "{{ project.get_short_description|truncatechars:200|escapejs }}",
  "creator": {
    "@type": "Organization",
    "@id": "{{ SITE_URL }}#organization"
  },
  "image": {% if project.featured_image %}"{{ SITE_URL }}{{ project.featured_image.url }}"{% else %}"{{ SITE_URL }}{% static 'images/default-project.png' %}"{% endif %},
  "datePublished": "{{ project.date_created|date:'c' }}",
  "dateModified": "{{ project.date_updated|date:'c' }}",
  "inLanguage": "{{ LANGUAGE_CODE }}",
  {% if project.project_date %}
  "dateCreated": "{{ project.project_date|date:'c' }}",
  {% endif %}
  {% if project.project_url %}
  "url": "{{ project.project_url }}",
  {% endif %}
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ SITE_URL }}{{ request.path }}"
  },
  "about": {
    "@type": "Service",
    "name": "{{ project.category.get_title|escapejs }}",
    "provider": {
      "@type": "Organization",
      "@id": "{{ SITE_URL }}#organization"
    }
  },
  {% if project.complexity_level %}
  "additionalProperty": [
    {
      "@type": "PropertyValue",
      "name": "Complexity Level",
      "value": "{{ project.get_complexity_level_display }}"
    },
    {
      "@type": "PropertyValue",
      "name": "Project Status",
      "value": "{{ project.get_project_status_display }}"
    }
    {% if project.development_duration_weeks %},
    {
      "@type": "PropertyValue",
      "name": "Development Duration",
      "value": "{{ project.development_duration_weeks }} weeks"
    }
    {% endif %}
  ],
  {% endif %}
  "keywords": "{% for tag in project.tags.all %}{{ tag.get_name }}{% if not forloop.last %}, {% endif %}{% endfor %}"
}
</script>
{% endif %}

{% if service_category %}
<!-- Service Category Schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Service",
  "name": "{{ service_category.get_title|escapejs }}",
  "description": "{{ service_category.get_description|truncatechars:200|escapejs }}",
  "provider": {
    "@type": "Organization",
    "@id": "{{ SITE_URL }}#organization"
  },
  "serviceType": "{{ service_category.get_title|escapejs }}",
  "url": "{{ SITE_URL }}{{ request.path }}",
  "image": {% if service_category.main_image %}"{{ SITE_URL }}{{ service_category.main_image.url }}"{% else %}"{{ SITE_URL }}{% static 'images/default-service.png' %}"{% endif %},
  "areaServed": [
    {
      "@type": "Country",
      "name": "Poland"
    },
    {
      "@type": "Country",
      "name": "Ukraine"
    },
    {
      "@type": "Country",
      "name": "Germany"
    },
    {
      "@type": "Country",
      "name": "Europe"
    }
  ],
  "audience": {
    "@type": "BusinessAudience",
    "audienceType": "Small and Medium Businesses, Enterprises"
  },
  "serviceOutput": "Business Automation Solution",
  "availableChannel": {
    "@type": "ServiceChannel",
    "serviceUrl": "{{ SITE_URL }}{{ request.path }}",
    "serviceLocation": {
      "@type": "Place",
      "name": "Online"
    }
  }
}
</script>
{% endif %}

<!-- Projects List Schema (for projects listing page) -->
{% if page_type == 'projects' and not project %}
{% if all_projects %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "ItemList",
  "name": "{% if LANGUAGE_CODE == 'uk' %}Наші проєкти{% elif LANGUAGE_CODE == 'pl' %}Nasze projekty{% else %}Our Projects{% endif %}",
  "description": "{% if LANGUAGE_CODE == 'uk' %}Портфоліо виконаних проєктів автоматизації та AI{% elif LANGUAGE_CODE == 'pl' %}Portfolio zrealizowanych projektów automatyzacji i AI{% else %}Portfolio of completed automation and AI projects{% endif %}",
  "url": "{{ SITE_URL }}{{ request.path }}",
  "numberOfItems": {{ total_projects|default:2 }},
  "itemListElement": [
    {% for proj in all_projects|slice:":10" %}
    {
      "@type": "ListItem",
      "position": {{ forloop.counter }},
      "item": {
        "@type": "CreativeWork",
        "name": "{{ proj.title_en|default:proj.title_uk|escapejs }}",
        "description": "{{ proj.short_description_en|default:proj.short_description_uk|truncatechars:160|escapejs }}",
        "url": "{{ SITE_URL }}/{% if LANGUAGE_CODE != 'en' %}{{ LANGUAGE_CODE }}/{% endif %}projects/{{ proj.slug }}/",
        "creator": {
          "@type": "Organization",
          "@id": "{{ SITE_URL }}#organization"
        }{% if proj.featured_image %},
        "image": "{{ SITE_URL }}{{ proj.featured_image.url }}"{% endif %}
      }
    }{% if not forloop.last %},{% endif %}
    {% endfor %}
  ]
}
</script>
{% endif %}
{% endif %}

<!-- Services List Schema (for services listing page) -->
{% if page_type == 'services' and not service_category %}
{% if services_list %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "ItemList",
  "name": "{% if LANGUAGE_CODE == 'uk' %}Наші послуги{% elif LANGUAGE_CODE == 'pl' %}Nasze usługi{% else %}Our Services{% endif %}",
  "description": "{% if LANGUAGE_CODE == 'uk' %}Комплексні послуги автоматизації та AI для бізнесу{% elif LANGUAGE_CODE == 'pl' %}Kompleksowe usługi automatyzacji i AI dla biznesu{% else %}Comprehensive automation and AI services for business{% endif %}",
  "url": "{{ SITE_URL }}{{ request.path }}",
  "itemListElement": [
    {% for serv in services_list %}
    {
      "@type": "ListItem",
      "position": {{ forloop.counter }},
      "item": {
        "@type": "Service",
        "name": "{{ serv.title_en|default:serv.title_uk|escapejs }}",
        "description": "{{ serv.short_description_en|default:serv.short_description_uk|truncatechars:160|escapejs }}",
        "url": "{{ SITE_URL }}/{% if LANGUAGE_CODE != 'en' %}{{ LANGUAGE_CODE }}/{% endif %}services/{{ serv.slug }}/",
        "provider": {
          "@type": "Organization",
          "@id": "{{ SITE_URL }}#organization"
        }{% if serv.main_image %},
        "image": "{{ SITE_URL }}{{ serv.main_image.url }}"{% endif %}
      }
    }{% if not forloop.last %},{% endif %}
    {% endfor %}
  ]
}
</script>
{% endif %}
{% endif %}

<!-- News/Blog List Schema (for news listing page) -->
{% if page_type == 'news' and not article %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Blog",
  "name": "{% if LANGUAGE_CODE == 'uk' %}Новини Lazysoft{% elif LANGUAGE_CODE == 'pl' %}Aktualności Lazysoft{% else %}Lazysoft News{% endif %}",
  "description": "{% if LANGUAGE_CODE == 'uk' %}Останні новини про AI та автоматизацію{% elif LANGUAGE_CODE == 'pl' %}Najnowsze wiadomości o AI i automatyzacji{% else %}Latest news about AI and automation{% endif %}",
  "url": "{{ SITE_URL }}{{ request.path }}",
  "publisher": {
    "@type": "Organization",
    "@id": "{{ SITE_URL }}#organization"
  },
  "inLanguage": "{{ LANGUAGE_CODE }}"
}
</script>
{% endif %}

{% if page_type == 'home' %}
<!-- Homepage Service Schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Service",
  "name": "{% if LANGUAGE_CODE == 'uk' %}AI Автоматизація для бізнесу{% elif LANGUAGE_CODE == 'pl' %}Automatyzacja AI dla biznesu{% else %}AI Automation for Business{% endif %}",
  "description": "{% if LANGUAGE_CODE == 'uk' %}Комплексні послуги ШІ автоматизації та веб-розробки для європейських МСП{% elif LANGUAGE_CODE == 'pl' %}Kompleksowe usługi automatyzacji AI i tworzenia stron internetowych dla europejskich MŚP{% else %}Comprehensive AI automation and web development services for European SMEs{% endif %}",
  "provider": {
    "@type": "Organization",
    "@id": "{{ SITE_URL }}#organization"
  },
  "areaServed": "Worldwide",
  "audience": {
    "@type": "BusinessAudience",
    "audienceType": "Small and Medium Businesses, Enterprises"
  },
  "hasOfferCatalog": {
    "@type": "OfferCatalog",
    "name": "{% if LANGUAGE_CODE == 'uk' %}Послуги автоматизації{% elif LANGUAGE_CODE == 'pl' %}Usługi automatyzacji{% else %}Automation Services{% endif %}",
    "itemListElement": [
      {
        "@type": "Offer",
        "itemOffered": {
          "@type": "Service",
          "name": "{% if LANGUAGE_CODE == 'uk' %}Розробка чат-ботів{% elif LANGUAGE_CODE == 'pl' %}Tworzenie chatbotów{% else %}Chatbot Development{% endif %}"
        }
      },
      {
        "@type": "Offer",
        "itemOffered": {
          "@type": "Service", 
          "name": "{% if LANGUAGE_CODE == 'uk' %}AI автоматизація процесів{% elif LANGUAGE_CODE == 'pl' %}Automatyzacja procesów AI{% else %}AI Process Automation{% endif %}"
        }
      },
      {
        "@type": "Offer",
        "itemOffered": {
          "@type": "Service",
          "name": "{% if LANGUAGE_CODE == 'uk' %}Веб-розробка{% elif LANGUAGE_CODE == 'pl' %}Tworzenie stron internetowych{% else %}Web Development{% endif %}"
        }
      }
    ]
  }
}
</script>

<!-- Featured Products on Homepage -->
{% if featured_products %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "ItemList",
  "name": "{% if LANGUAGE_CODE == 'uk' %}Наші продукти{% elif LANGUAGE_CODE == 'pl' %}Nasze produkty{% else %}Our Products{% endif %}",
  "itemListElement": [
    {% for prod in featured_products %}
    {
      "@type": "ListItem",
      "position": {{ forloop.counter }},
      "item": {
        "@type": "Thing",
        "name": "{{ prod.title|escapejs }}",
        "description": "{{ prod.short_description|truncatechars:160|escapejs }}",
        "url": "{{ SITE_URL }}{{ prod.url }}"{% if prod.image %},
        "image": "{{ SITE_URL }}{{ prod.image.url }}"{% endif %}
      }
    }{% if not forloop.last %},{% endif %}
    {% endfor %}
  ]
}
</script>
{% endif %}

<!-- Featured Projects on Homepage -->
{% if featured_projects %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "ItemList",
  "name": "{% if LANGUAGE_CODE == 'uk' %}Featured проєкти{% elif LANGUAGE_CODE == 'pl' %}Wyróżnione projekty{% else %}Featured Projects{% endif %}",
  "itemListElement": [
    {% for proj in featured_projects %}
    {
      "@type": "ListItem",
      "position": {{ forloop.counter }},
      "item": {
        "@type": "CreativeWork",
        "name": "{{ proj.title_en|default:proj.title_uk|escapejs }}",
        "description": "{{ proj.short_description_en|default:proj.short_description_uk|truncatechars:160|escapejs }}",
        "url": "{{ SITE_URL }}/{% if LANGUAGE_CODE != 'en' %}{{ LANGUAGE_CODE }}/{% endif %}projects/{{ proj.slug }}/",
        "creator": {
          "@type": "Organization",
          "@id": "{{ SITE_URL }}#organization"
        }{% if proj.featured_image %},
        "image": "{{ SITE_URL }}{{ proj.featured_image.url }}"{% endif %}
      }
    }{% if not forloop.last %},{% endif %}
    {% endfor %}
  ]
}
</script>
{% endif %}

<!-- Latest News on Homepage -->
{% if latest_articles %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "ItemList",
  "name": "{% if LANGUAGE_CODE == 'uk' %}Останні новини{% elif LANGUAGE_CODE == 'pl' %}Najnowsze wiadomości{% else %}Latest News{% endif %}",
  "itemListElement": [
    {% for article in latest_articles|slice:":5" %}
    {
      "@type": "ListItem",
      "position": {{ forloop.counter }},
      "item": {
        "@type": "NewsArticle",
        "headline": "{{ article.title_en|default:article.title_uk|truncatechars:110|escapejs }}",
        "url": "{{ SITE_URL }}{{ article.get_absolute_url }}",
        "datePublished": "{{ article.published_at|date:'c' }}",
        "author": {
          "@type": "Organization",
          "@id": "{{ SITE_URL }}#organization"
        }{% if article.ai_image_url %},
        "image": "{{ article.ai_image_url }}"{% endif %}
      }
    }{% if not forloop.last %},{% endif %}
    {% endfor %}
  ]
}
</script>
{% endif %}

<!-- Featured Services on Homepage -->
{% if services %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "ItemList",
  "name": "{% if LANGUAGE_CODE == 'uk' %}Наші послуги{% elif LANGUAGE_CODE == 'pl' %}Nasze usługi{% else %}Our Services{% endif %}",
  "itemListElement": [
    {% for serv in services|slice:":6" %}
    {
      "@type": "ListItem",
      "position": {{ forloop.counter }},
      "item": {
        "@type": "Service",
        "name": "{{ serv.title|escapejs }}",
        "description": "{{ serv.short|truncatechars:160|escapejs }}",
        "url": "{{ SITE_URL }}/{% if LANGUAGE_CODE != 'en' %}{{ LANGUAGE_CODE }}/{% endif %}services/{{ serv.slug }}/",
        "provider": {
          "@type": "Organization",
          "@id": "{{ SITE_URL }}#organization"
        }{% if serv.main_image %},
        "image": "{{ SITE_URL }}{{ serv.main_image }}"{% endif %}
      }
    }{% if not forloop.last %},{% endif %}
    {% endfor %}
  ]
}
</script>
{% endif %}
{% endif %}

<!-- Product Schema (for product detail pages) -->
{% if product %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "{{ product.get_title|escapejs }}",
  "description": "{{ product.get_short_description|truncatechars:160|escapejs }}",
  "applicationCategory": "BusinessApplication",
  "operatingSystem": "Web-based",
  "offers": {
    "@type": "AggregateOffer",
    "priceCurrency": "{{ price_currency|default:'USD' }}",
    "lowPrice": "{{ low_price|default:'39' }}",
    "highPrice": "{{ high_price|default:'99' }}",
    "availability": "https://schema.org/InStock",
    "url": "{{ SITE_URL }}{{ request.path }}",
    "priceValidUntil": "{% now 'Y' %}-12-31"{% if pricing_packages and pricing_packages|length > 0 %},
    "offerCount": "{{ pricing_packages|length }}"{% endif %}
  },
  "image": {% if product.featured_image %}"{{ SITE_URL }}{{ product.featured_image.url }}"{% else %}"{{ SITE_URL }}{% static 'images/default-product.png' %}"{% endif %},
  "provider": {
    "@type": "Organization",
    "@id": "{{ SITE_URL }}#organization"
  },
  "inLanguage": "{{ LANGUAGE_CODE }}",
  "datePublished": "{{ product.date_created|date:'c' }}",
  "dateModified": "{{ product.date_updated|date:'c' }}"{% if aggregate_rating and reviews_count and reviews_count > 0 %},
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "{{ aggregate_rating }}",
    "reviewCount": "{{ reviews_count }}",
    "bestRating": "5",
    "worstRating": "1"
  }{% endif %}{% if reviews_raw and reviews_count and reviews_count > 0 %},
  "review": [
    {% for review in reviews_raw %}
    {
      "@type": "Review",
      "author": {
        "@type": "Person",
        "name": "{{ review.author_name|escapejs }}"
      },
      "reviewRating": {
        "@type": "Rating",
        "ratingValue": "{{ review.rating }}",
        "bestRating": "5",
        "worstRating": "1"
      },
      "reviewBody": "{{ review.get_review_text|truncatechars:200|escapejs }}",
      "datePublished": "{{ review.date_created|date:'c' }}"
    }{% if not forloop.last %},{% endif %}
    {% endfor %}
  ]{% endif %}
}
</script>
{% endif %}

<!-- Product List Schema (for product listing pages) -->
{% if products_list %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "ItemList",
  "itemListElement": [
    {% for product in products_list %}
    {
      "@type": "ListItem",
      "position": {{ forloop.counter }},
      "item": {
        "@type": "SoftwareApplication",
        "name": "{{ product.get_title|escapejs }}",
        "description": "{{ product.get_short_description|truncatechars:160|escapejs }}",
        "url": "{{ SITE_URL }}{{ product.get_absolute_url }}",
        "image": {% if product.featured_image %}"{{ SITE_URL }}{{ product.featured_image.url }}"{% else %}"{{ SITE_URL }}{% static 'images/default-product.png' %}"{% endif %},
        "applicationCategory": "BusinessApplication",
        "operatingSystem": "Web-based"
      }
    }{% if not forloop.last %},{% endif %}
    {% endfor %}
  ]
}
</script>
{% endif %}

<!-- FAQ Schema (if FAQ page) -->
{% if faqs %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {% for faq in faqs %}
    {
      "@type": "Question",
      "name": "{{ faq.question|escapejs }}",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "{{ faq.answer|escapejs }}"
      }
    }{% if not forloop.last %},{% endif %}
    {% endfor %}
  ]
}
</script>
{% endif %}

<!-- AboutPage Schema (for about page) -->
{% if page_type == 'about' %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "AboutPage",
  "name": "{% if LANGUAGE_CODE == 'uk' %}Про нас{% elif LANGUAGE_CODE == 'pl' %}O nas{% else %}About Us{% endif %}",
  "description": "{% if LANGUAGE_CODE == 'uk' %}Дізнайтеся більше про Lazysoft - лідера в автоматизації та AI рішеннях{% elif LANGUAGE_CODE == 'pl' %}Dowiedz się więcej o Lazysoft - liderze w automatyzacji i rozwiązaniach AI{% else %}Learn more about Lazysoft - leader in automation and AI solutions{% endif %}",
  "url": "{{ SITE_URL }}{{ request.path }}",
  "mainEntity": {
    "@type": "Organization",
    "@id": "{{ SITE_URL }}#organization"
  },
  "inLanguage": "{{ LANGUAGE_CODE }}"
}
</script>
{% endif %}

<!-- LocalBusiness Schema (for contact page) -->
{% if page_type == 'contact' %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "LocalBusiness",
  "@id": "{{ SITE_URL }}#organization",
  "name": "{{ SITE_NAME }}",
  "description": "{% if LANGUAGE_CODE == 'uk' %}Автоматизація та веб-розробка для бізнесу{% elif LANGUAGE_CODE == 'pl' %}Automatyzacja i tworzenie stron internetowych dla biznesu{% else %}Business automation and web development{% endif %}",
  "url": "{{ SITE_URL }}",
  "telephone": "+48-727-842-737",
  "email": "dchuprina@lazysoft.pl",
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "Edwarda Dembowskiego 98/1",
    "addressLocality": "Wrocław",
    "postalCode": "51-669",
    "addressCountry": "PL"
  },
  "geo": {
    "@type": "GeoCoordinates",
    "latitude": "51.1079",
    "longitude": "17.0385"
  },
  "openingHours": "Mo-Fr 09:00-17:00",
  "priceRange": "€€",
  "paymentAccepted": "Cash, Credit Card, Bank Transfer",
  "currenciesAccepted": "EUR, USD, PLN, UAH"
}
</script>
{% endif %}

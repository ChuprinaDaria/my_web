{% extends "core/base.html" %}
{% load static i18n %}
{% get_current_language as CURRENT_LANG %}

{% block title %}{{ seo_title }}{% endblock %}
{% block meta_description %}{{ seo_description }}{% endblock %}
{% block og_title %}{{ seo_title }}{% endblock %}
{% block og_description %}{{ seo_description }}{% endblock %}
{% block og_image %}{{ og_image|default:"https://lazysoft.dev/static/images/projects-og.jpg" }}{% endblock %}

{% block extra_meta %}
  <link rel="canonical" href="https://lazysoft.dev/{{ CURRENT_LANG }}/projects/" />
  <link rel="alternate" href="https://lazysoft.dev/en/projects/" hreflang="en">
  <link rel="alternate" href="https://lazysoft.dev/uk/projects/" hreflang="uk">
  <link rel="alternate" href="https://lazysoft.dev/pl/projects/" hreflang="pl">
{% endblock %}

{% block content %}
<main class="projects-page">

  <!-- Hero —Å–µ–∫—Ü—ñ—è -->
  <section class="projects-hero">
    <div class="container">
      
      <!-- Breadcrumbs -->
      <nav class="projects-breadcrumbs">
        <a href="/{{ CURRENT_LANG }}/" class="breadcrumb-link">
          <span data-lang="en">Home</span>
          <span data-lang="uk">–ì–æ–ª–æ–≤–Ω–∞</span>
          <span data-lang="pl">G≈Ç√≥wna</span>
        </a>
        <span class="breadcrumb-divider">‚Üí</span>
        <span class="breadcrumb-current">
          <span data-lang="en">Projects</span>
          <span data-lang="uk">–ü—Ä–æ—î–∫—Ç–∏</span>
          <span data-lang="pl">Projekty</span>
        </span>
      </nav>

      <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–∞ –æ–ø–∏—Å -->
      <div class="hero-content">
        <div class="hero-title">{{ overview_title|safe }}</div>
        <div class="hero-description">{{ overview_description|safe }}</div>
        
        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ - –í–ò–ü–†–ê–í–õ–ï–ù–û -->
        <div class="projects-stats">
          <div class="stat-item">
            <span class="stat-number">{{ total_categories|default:"5" }}+</span>
            <span class="stat-label">
              <span data-lang="en">Categories</span>
              <span data-lang="uk">–ö–∞—Ç–µ–≥–æ—Ä—ñ–π</span>
              <span data-lang="pl">Kategorii</span>
            </span>
          </div>
          <div class="stat-item">
            <span class="stat-number">{{ total_projects|default:"20" }}+</span>
            <span class="stat-label">
              <span data-lang="en">Projects</span>
              <span data-lang="uk">–ü—Ä–æ—î–∫—Ç—ñ–≤</span>
              <span data-lang="pl">Projekt√≥w</span>
            </span>
          </div>
          <div class="stat-item">
            <span class="stat-number">100%</span>
            <span class="stat-label">
              <span data-lang="en">Success Rate</span>
              <span data-lang="uk">–£—Å–ø—ñ—à–Ω–∏—Ö</span>
              <span data-lang="pl">Sukces</span>
            </span>
          </div>
        </div>

        <!-- CTA –∫–Ω–æ–ø–∫–∞ -->
        <div class="hero-cta">
          <button class="main-cta-button" onclick="scrollToContact('');">
            <span class="cta-icon">üöÄ</span>
            <span class="cta-text">
              <span data-lang="en">Start Your Project</span>
              <span data-lang="uk">–ü–æ—á–∞—Ç–∏ —Å–≤—ñ–π –ø—Ä–æ—î–∫—Ç</span>
              <span data-lang="pl">Rozpocznij projekt</span>
            </span>
            <span class="cta-arrow">‚Üí</span>
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- –ü—Ä–æ—î–∫—Ç–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è—Ö -->
  <section class="projects-categories">
    <div class="container">
      {% for category in categories %}
        <div class="category-section">
          
          <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó -->
          <div class="category-header">
            <div class="category-info">
              <div class="category-title">{{ category.title|safe }}</div>
              <div class="category-description">{{ category.description|safe }}</div>
            </div>
            
            <!-- –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø—Ä–æ—î–∫—Ç—ñ–≤ -->
            <div class="category-count">
              <span class="count-number">{{ category.projects|length }}</span>
              <span class="count-label">
                <span data-lang="en">projects</span>
                <span data-lang="uk">–ø—Ä–æ—î–∫—Ç—ñ–≤</span>
                <span data-lang="pl">projekt√≥w</span>
              </span>
            </div>
          </div>

          <!-- –°—ñ—Ç–∫–∞ –ø—Ä–æ—î–∫—Ç—ñ–≤ -->
          <div class="category-projects-grid">
            {% for project in category.projects %}
              <article class="category-project-card" onclick="location.href='/{{ CURRENT_LANG }}/projects/{{ project.slug }}/'">
                
                <!-- –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø—Ä–æ—î–∫—Ç—É -->
                {% if project.featured_image %}
                  <div class="project-card-image">
                    <img src="{{ project.featured_image.url }}" alt="{{ project.title }}" loading="lazy">
                    <div class="image-overlay"></div>
                  </div>
                {% endif %}

                <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –∫–∞—Ä—Ç–∫–∏ -->
                <div class="project-card-content">
                  
                  <!-- –ú—ñ–Ω—ñ–∞—Ç—é—Ä–Ω—ñ —Ç–µ–≥–∏ - –í–ò–ü–†–ê–í–õ–ï–ù–û -->
                  <div class="mini-project-tags">
                    {% if project.project_type_uk %}
                      <span class="mini-tag primary">
                        <span data-lang="en">{{ project.project_type_en|truncatewords:2 }}</span>
                        <span data-lang="uk">{{ project.project_type_uk|truncatewords:2 }}</span>
                        <span data-lang="pl">{{ project.project_type_pl|truncatewords:2 }}</span>
                      </span>
                    {% endif %}
                    
                    {% if project.is_ai_powered %}
                      <span class="mini-tag ai">ü§ñ</span>
                    {% endif %}
                    
                    {% if project.is_top_project %}
                      <span class="mini-tag top">üëë</span>
                    {% endif %}
                  </div>

                  <!-- –ù–∞–∑–≤–∞ –ø—Ä–æ—î–∫—Ç—É -->
                  <div class="project-card-title">{{ project.title|safe }}</div>
                  
                  <!-- –ö–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å -->
                  <div class="project-card-description">{{ project.short_description|striptags|truncatewords:15|safe }}</div>
                  
                  <!-- –ú–µ—Ç—Ä–∏–∫–∏ -->
                  <div class="project-card-meta">
                    <span class="meta-item">
                      <span class="meta-icon">üìÖ</span>
                      <span class="meta-text">2024</span>
                    </span>
                    <span class="meta-divider">‚Ä¢</span>
                    <span class="meta-item">
                      <span class="meta-icon">üëÅÔ∏è</span>
                      <span class="meta-text">
                        <span data-lang="en">View</span>
                        <span data-lang="uk">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏</span>
                        <span data-lang="pl">Zobacz</span>
                      </span>
                    </span>
                    <span class="meta-arrow">‚Üí</span>
                  </div>
                </div>

                <!-- –•–æ–≤–µ—Ä –µ—Ñ–µ–∫—Ç -->
                <div class="card-glow-effect"></div>
              </article>
            {% endfor %}
          </div>

          <!-- CTA –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó -->
          <div class="category-cta">
            <div class="category-cta-content">
              <div class="cta-message">
                <span data-lang="en">Need a similar solution?</span>
                <span data-lang="uk">–ü–æ—Ç—Ä—ñ–±–Ω–µ –ø–æ–¥—ñ–±–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è?</span>
                <span data-lang="pl">Potrzebujesz podobnego rozwiƒÖzania?</span>
              </div>
              <button class="category-cta-button" onclick="scrollToContact('{{ category.title }}');">
                <span data-lang="en">Let's Discuss</span>
                <span data-lang="uk">–û–±–≥–æ–≤–æ—Ä–∏–º–æ</span>
                <span data-lang="pl">Om√≥wmy</span>
              </button>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </section>

  <!-- –§—ñ–Ω–∞–ª—å–Ω–∏–π CTA -->
  <section class="projects-final-cta">
    <div class="container">
      <div class="final-cta-card glass">
        <div class="cta-content">
          <div class="cta-icon-large">üöÄ</div>
          <div class="cta-title">
            <span data-lang="en">Ready to Start Your Project?</span>
            <span data-lang="uk">–ì–æ—Ç–æ–≤—ñ —Ä–æ–∑–ø–æ—á–∞—Ç–∏ —Å–≤—ñ–π –ø—Ä–æ—î–∫—Ç?</span>
            <span data-lang="pl">Gotowy, ≈ºeby rozpoczƒÖƒá projekt?</span>
          </div>
          <div class="cta-subtitle">
            <span data-lang="en">From idea to automation - we make it happen</span>
            <span data-lang="uk">–í—ñ–¥ —ñ–¥–µ—ó –¥–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó - –º–∏ –≤—Ç—ñ–ª—é—î–º–æ –º—Ä—ñ—ó</span>
            <span data-lang="pl">Od pomys≈Çu do automatyzacji - sprawiamy, ≈ºe siƒô dzieje</span>
          </div>
          
          <!-- –ü–µ—Ä–µ–≤–∞–≥–∏ -->
          <div class="cta-benefits">
            <div class="benefit-item">
              <span class="benefit-icon">‚ö°</span>
              <span class="benefit-text">
                <span data-lang="en">Fast Development</span>
                <span data-lang="uk">–®–≤–∏–¥–∫–∞ —Ä–æ–∑—Ä–æ–±–∫–∞</span>
                <span data-lang="pl">Szybka realizacja</span>
              </span>
            </div>
            <div class="benefit-item">
              <span class="benefit-icon">üéØ</span>
              <span class="benefit-text">
                <span data-lang="en">Custom Solutions</span>
                <span data-lang="uk">–Ü–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω—ñ —Ä—ñ—à–µ–Ω–Ω—è</span>
                <span data-lang="pl">RozwiƒÖzania na miarƒô</span>
              </span>
            </div>
            <div class="benefit-item">
              <span class="benefit-icon">üöÄ</span>
              <span class="benefit-text">
                <span data-lang="en">Ongoing Support</span>
                <span data-lang="uk">–ü–æ—Å—Ç—ñ–π–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞</span>
                <span data-lang="pl">CiƒÖg≈Çe wsparcie</span>
              </span>
            </div>
          </div>

          <!-- –ö–Ω–æ–ø–∫–∏ –¥—ñ–π -->
          <div class="cta-actions">
            <button class="btn-primary" onclick="scrollToContact('');">
              <span class="button-icon">üí¨</span>
              <span data-lang="en">Start Discussion</span>
              <span data-lang="uk">–ü–æ—á–∞—Ç–∏ –æ–±–≥–æ–≤–æ—Ä–µ–Ω–Ω—è</span>
              <span data-lang="pl">Rozpocznij dyskusjƒô</span>
            </button>
            
            <a href="/{{ CURRENT_LANG }}/services/" class="cta-secondary-button">
              <span class="button-icon">üìã</span>
              <span data-lang="en">View Services</span>
              <span data-lang="uk">–î–∏–≤–∏—Ç–∏—Å—å –ø–æ—Å–ª—É–≥–∏</span>
              <span data-lang="pl">Zobacz us≈Çugi</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- –°–æ—Ü—ñ–∞–ª—å–Ω–∏–π —à–µ—Ä—ñ–Ω–≥ -->
  <section class="social-sharing">
    <div class="container">
      <div class="sharing-content">
        <div class="sharing-title">
          <span data-lang="en">Share this page:</span>
          <span data-lang="uk">–ü–æ–¥—ñ–ª–∏—Ç–∏—Å—è —Å—Ç–æ—Ä—ñ–Ω–∫–æ—é:</span>
          <span data-lang="pl">Udostƒôpnij tƒô stronƒô:</span>
        </div>
        <div class="sharing-buttons">
          <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}" target="_blank" class="share-button facebook">
            <span class="share-icon">üìò</span>
            <span>Facebook</span>
          </a>
          <a href="https://twitter.com/intent/tweet?url={{ request.build_absolute_uri }}" target="_blank" class="share-button twitter">
            <span class="share-icon">üê¶</span>
            <span>Twitter</span>
          </a>
          <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ request.build_absolute_uri }}" target="_blank" class="share-button linkedin">
            <span class="share-icon">üíº</span>
            <span>LinkedIn</span>
          </a>
        </div>
      </div>
    </div>
  </section>

</main>

<!-- –ö–æ–Ω—Ç–∞–∫—Ç —Ñ–æ—Ä–º–∞ -->
<section id="contact" class="contact">
  {% include "core/contact_form.html" %}
</section>

{% endblock %}

{% block extra_scripts %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "{{ seo_title|escapejs }}",
  "description": "{{ seo_description|escapejs }}",
  "url": "https://lazysoft.dev/{{ CURRENT_LANG }}/projects/",
  "inLanguage": "{{ CURRENT_LANG }}",
  "mainEntity": {
    "@type": "ItemList",
    "itemListElement": [
      {% for category in categories %}
        {% for project in category.projects %}
        {
          "@type": "ListItem",
          "position": {{ forloop.parentloop.counter0|add:forloop.counter }},
          "url": "https://lazysoft.dev/{{ CURRENT_LANG }}/projects/{{ project.slug }}/",
          "name": "{{ project.title|escapejs }}"
        }{% if not forloop.last or not forloop.parentloop.last %},{% endif %}
        {% endfor %}
      {% endfor %}
    ]
  },
  "breadcrumb": {
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "https://lazysoft.dev/{{ CURRENT_LANG }}/"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "Projects",
        "item": "https://lazysoft.dev/{{ CURRENT_LANG }}/projects/"
      }
    ]
  }
}
</script>

<script>
// Smooth scroll to contact function
function scrollToContact(projectInfo) {
  const contactSection = document.getElementById('contact');
  if (contactSection) {
    contactSection.scrollIntoView({ 
      behavior: 'smooth',
      block: 'start'
    });
    
    // Fill form with project info
    setTimeout(() => {
      const messageField = document.querySelector('#contact textarea, #contact input[name="message"]');
      if (messageField && projectInfo) {
        const currentLang = document.documentElement.lang || 'uk';
        const messages = {
          'uk': `–ü—Ä–∏–≤—ñ—Ç! –ú–µ–Ω–µ –∑–∞—Ü—ñ–∫–∞–≤–∏–ª–∏ –ø—Ä–æ—î–∫—Ç–∏ –∑ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó "${projectInfo}". –•–æ—á—É –æ–±–≥–æ–≤–æ—Ä–∏—Ç–∏ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ —Å–ø—ñ–≤–ø—Ä–∞—Ü—ñ.`,
          'en': `Hi! I'm interested in projects from "${projectInfo}" category. I'd like to discuss collaboration opportunities.`,
          'pl': `Cze≈õƒá! InteresujƒÖ mnie projekty z kategorii "${projectInfo}". Chcia≈Çbym om√≥wiƒá mo≈ºliwo≈õci wsp√≥≈Çpracy.`
        };
        messageField.value = messages[currentLang] || messages['uk'];
        messageField.focus();
      }
    }, 1000);
  }
}
</script>
{% endblock %}